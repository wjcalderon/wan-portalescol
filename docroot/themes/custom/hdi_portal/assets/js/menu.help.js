!function(e,s,a,i){"use strict";e("#block-hdi-portal-buscasayuda").on("click","#show-menu-help",(function(s){s.preventDefault();let a=e(this),i=a.parent("#block-hdi-portal-buscasayuda").find("ul.menu"),d=e("body");a.hasClass("active")?(a.removeClass("active"),i.addClass("is-hidden"),d.hasClass("js-mobile")&&(e(".overlay-buscayuda").remove(),d.removeClass("abierto-azul"))):(a.addClass("active"),i.removeClass("is-hidden"),d.hasClass("js-mobile")&&(d.append('<div class="overlay-buscayuda"></div>'),d.addClass("abierto-azul")))})),s.behaviors.menuHelpJS={attach:function(s,a){e((function(){let s=e(".modal-link-fallback-popup");if(s.hasClass("modal-close"))e("#blocks-necesecitas-ayuda").addClass("is-fixed-global").removeClass("is-hidden"),s.removeClass("is-hidden"),s.find("span.modal-close, span.button").on("click",(function(){e("#blocks-necesecitas-ayuda").removeClass("is-fixed-global"),s.addClass("is-hidden")}));else if(s.length>0){let a=s.find("table"),i=a.find("tr").eq(0).find("td").eq(1).text(),d=a.find("tr").eq(1).find("td").eq(1).text(),t=new Date;a.remove(),Date.parse(i)<Date.parse(t)&&Date.parse(d)>Date.parse(t)&&(e("#blocks-necesecitas-ayuda").addClass("is-fixed-global").removeClass("is-hidden"),s.removeClass("is-hidden"))}})),e("#block-sinisterthankyoumessage").hasClass("block-sinister-notification-thankyou")&&e(".component__drupal-block").addClass("thankyou"),e("#block-hdi-portal-buscasayuda ul.menu").on("click","li.close",(function(){e("#block-hdi-portal-buscasayuda ul.menu").addClass("is-hidden"),e("#block-hdi-portal-buscasayuda #show-menu-help").removeClass("active")})),e("body").on("click",".is-fixed-global",(function(s){s.target===this&&e("#blocks-necesecitas-ayuda .head-modal #close-mb").click()})),e("#block-hdi-portal-buscasayuda ul.menu li a").not(".chat, .nopopup").on("click",(function(s){s.preventDefault(),e("#block-hdi-portal-buscasayuda ul.menu").addClass("is-hidden");let a,d=e(this).attr("href"),t=e("#blocks-necesecitas-ayuda"),n=t.find(d),l=n.find(".head-modal");switch(n.addClass("is-fixed-global").removeClass("is-hidden"),l.length>0?a="":(a='<div class="head-modal"><span id="close-mb" class="close"><img src="/themes/custom/liberty_public/images/icons/close.svg"></span></div>',n.find(".field--name-field-banner").prepend(a)),n.find("#close-mb").on("click",(function(){e(this).parent().parent().parent().addClass("is-hidden").removeClass("is-fixed-global"),t.find("ul.menu").addClass("is-hidden"),t.find("#show-menu-help").removeClass("active"),e(".overlay-buscayuda").remove()})),d){case"#block-buscadorpuntosdepagopopup":n.addClass("no-transform-y"),n.find("#edit-name, #edit-title").each((function(){e(this).val("")})),n.find(".button").click(),e("#filters-payment .button").click((function(){let s=e("#filters-payment #edit-name").val(),a=e("#filters-payment #edit-title").val();n.find('.view-filters input[name="name"]').val(s),n.find('.view-filters input[name="title"]').val(a),n.find('.view-filters input[type="submit"]').each((function(){e(this).click()}))})),n.find(".options-results li a").click((function(s){s.preventDefault();let a=e(this).attr("cdata-type");n.find(".options-results li a").removeClass("active"),e(this).addClass("active"),"map"==a&&(n.find(".list-points-payment").addClass("is-desktop"),n.find(".mapa-points-payment").removeClass("is-desktop")),"list"==a&&(n.find(".mapa-points-payment").addClass("is-desktop"),n.find(".list-points-payment").removeClass("is-desktop"))})),n.find(".show-filters").on("click",(function(s){s.preventDefault();let a=e(this);a.hasClass("filters-open")?(a.children("a").text("Mostrar filtros"),a.removeClass("filters-open"),n.find(".filters").addClass("is-desktop")):(a.children("a").text("Ocultar filtros"),a.addClass("filters-open"),n.find(".filters").removeClass("is-desktop"))}));break;case"#block-redmedicapopup":let s=n.find(".wrapper-form-search");n.find("#edit-plan-type input[name=plan_type]").each((function(s,a){let i=e(a);i.is(":checked")&&i.prop("checked",!1)})).find(".mapa-redmedica-popup").addClass("is-hidden"),e("body").hasClass("js-mobile")&&(s.removeClass("transform-up, is-fixed"),s.find("#edit-plan-type .form-item").removeClass("is-desktop"),n.find("#gp_form, .ctn-footer").each((function(){e(this).addClass("is-hidden")})),n.find(".form-item").removeClass("is-hidden"),n.find(".close-filter").remove(),0===n.find(".form-cancel").length&&n.find(".ctn-footer").append('<div class="form-item"><input class="btn button form-cancel" type="button" value="Cancelar"></div>'),n.on("click",".form-cancel",(function(){n.find("#close-mb").click()}))),n.find(".block-search-medical-network .ctn-footer").on("click",".form-submit",(function(s){s.preventDefault();let a=n.find("input[name='plan_type']").val(),i=n.find("input[name='h_city']").val(),d=n.find("#edit-specialty").val(),t=n.find("#edit-search-word").val();""!=a&&""!=i&&""!=d&&"none"!=d&&e(this).removeAttr("disabled"),n.find('.mapa-redmedica-popup .view-filters select[name="field_type_plan_target_id"]').val(a),n.find('.mapa-redmedica-popup .view-filters select[name="field_ubication_target_id"]').val(i),n.find('.mapa-redmedica-popup .view-filters select[name="field_speciality_target_id"]').val(d),n.find('.mapa-redmedica-popup .view-filters input[name="title"]').val(t),n.find('.mapa-redmedica-popup .view-filters input[type="submit"]').click(),n.find(".mapa-redmedica-popup").hasClass("is-hidden")&&n.find(".mapa-redmedica-popup").removeClass("is-hidden")})),n.find("#edit-search").on("click",(function(){n.addClass("no-transform-y"),e("body").hasClass("js-mobile")&&(n.removeClass("no-transform-y"),s.hasClass("is-fixed")&&s.addClass("transform-up").removeClass("transform-media"))}));break;case"#block-faqspopups":e("body").hasClass("js-mobile")&&setTimeout((function(){n.find(".slick-initialized").slick("unslick").slick()}),10),n.find(".form-buscador-popup #edit-title").val(""),n.find(".frecuentes").hasClass("is-hidden")&&n.find(".frecuentes").removeClass("is-hidden"),n.find(".form-buscador-popup").hasClass("is-hidden")&&n.find(".form-buscador-popup").removeClass("is-hidden"),n.find(".buscador").hasClass("is-hidden")||n.find(".buscador").addClass("is-hidden"),n.find(".component__view--categorias-documentos").hasClass("is-hidden")&&n.find(".component__view--categorias-documentos").removeClass("is-hidden"),n.find("#edit-submit-faqs").on("click",(function(s){s.preventDefault(),n.find(".buscadoriew-filters").hasClass("is-hidden")||n.find(".buscador .view-filters").addClass("is-hidden");let a=n.find("#edit-title").val(),d=drupalSettings.path.baseUrl+"zona-de-cliente/preguntas-frecuentes?title="+a;e.ajax({url:drupalSettings.path.baseUrl+"views/ajax?_wrapper_format=drupal_ajax",type:"POST",dataType:"json",data:"view_name=faqs&view_display_id=block_4&title="+a,success:function(e){n.find(".buscador").html(e[3].data)}}).done((function(){n.find(".buscador .view-faqs .view-filters .views-exposed-form").remove()})),n.find(".view-footer a.button").attr("href",d),n.find(".buscador .view-filters #edit-title").val(a),n.find(".buscador .view-filters #edit-submit-faqs").click(),n.find(".frecuentes").hasClass("is-hidden")||n.find(".frecuentes").addClass("is-hidden"),n.find(".component__view--categorias-documentos").hasClass("is-hidden")||n.find(".component__view--categorias-documentos").addClass("is-hidden"),n.find(".buscador").hasClass("is-hidden")&&n.find(".buscador").removeClass("is-hidden"),e(".form-buscador-popup .title-buscador-faqs-popup").hasClass("is-hidden")&&e(".form-buscador-popup .title-buscador-faqs-popup").removeClass("is-hidden"),e(i).ajaxStop((function(){n.find(".view-footer a.button").attr("href",d)}))}))}})),e.getJSON("/cities-autocomplete/0/all",(function(s){e.each(s,(function(s,a){e("#filters-payment #edit-name").append(e("<option>",{value:a.label,text:a.label}))}))}))}}}(jQuery,Drupal,0,this.document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS5oZWxwLmpzIiwibmFtZXMiOlsiJCIsIkRydXBhbCIsIndpbmRvdyIsImRvY3VtZW50Iiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJib3RvbiIsInRoaXMiLCJtZW51IiwicGFyZW50IiwiZmluZCIsImJvZHkiLCJoYXNDbGFzcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJyZW1vdmUiLCJhcHBlbmQiLCJiZWhhdmlvcnMiLCJtZW51SGVscEpTIiwiYXR0YWNoIiwiY29udGV4dCIsInNldHRpbmdzIiwibW9kYWxfZmFsbGJhY2siLCJsZW5ndGgiLCJ0YWJsZSIsInN0YXJ0X2RhdGUiLCJlcSIsInRleHQiLCJlbmRfZGF0ZSIsImFjdHVhbF9kYXRlIiwiRGF0ZSIsInBhcnNlIiwidGFyZ2V0IiwiY2xpY2siLCJub3QiLCJjbG9zZV9idG4iLCJpZCIsImF0dHIiLCJtZW51X2hlbHAiLCJibG9ja19oZWxwIiwiaGVhZF9tb2RhbCIsInByZXBlbmQiLCJlYWNoIiwidmFsIiwiY2l1ZGFkIiwibm9tYnJlIiwiZXZlbnQiLCJ0eXBlIiwiZWwiLCJjaGlsZHJlbiIsImJsb2NrX3NlYXJjaCIsImluZCIsInJhZGlvIiwiaXMiLCJwcm9wIiwicGxhbiIsImNpdHkiLCJzcGVjaWFsdHkiLCJ3b3JkIiwicmVtb3ZlQXR0ciIsInNldFRpbWVvdXQiLCJzbGljayIsImtleXdvcmRzIiwiaHJlZl92ZXJfbWFzIiwiZHJ1cGFsU2V0dGluZ3MiLCJwYXRoIiwiYmFzZVVybCIsImFqYXgiLCJ1cmwiLCJkYXRhVHlwZSIsImRhdGEiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJodG1sIiwiZG9uZSIsImFqYXhTdG9wIiwiZ2V0SlNPTiIsImtleSIsInZhbHVlIiwibGFiZWwiLCJqUXVlcnkiXSwic291cmNlcyI6WyJtZW51LmhlbHAuanMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQVdBLEVBQUdDLEVBQVFDLEVBQVFDLEdBQzVCLGFBRUFILEVBQUUsaUNBQWlDSSxHQUFHLFFBQVMsbUJBQW1CLFNBQVVDLEdBQzFFQSxFQUFFQyxpQkFFRixJQUFJQyxFQUFRUCxFQUFFUSxNQUNaQyxFQUFPRixFQUFNRyxPQUFPLGlDQUFpQ0MsS0FBSyxXQUMxREMsRUFBT1osRUFBRSxRQUVQTyxFQUFNTSxTQUFTLFdBQ2pCTixFQUFNTyxZQUFZLFVBQ2xCTCxFQUFLTSxTQUFTLGFBQ1ZILEVBQUtDLFNBQVMsZUFDaEJiLEVBQUUsc0JBQXNCZ0IsU0FDeEJKLEVBQUtFLFlBQVksbUJBR25CUCxFQUFNUSxTQUFTLFVBQ2ZOLEVBQUtLLFlBQVksYUFDYkYsRUFBS0MsU0FBUyxlQUNoQkQsRUFBS0ssT0FBTyx5Q0FDWkwsRUFBS0csU0FBUyxpQkFHcEIsSUFHQWQsRUFBT2lCLFVBQVVDLFdBQWEsQ0FDNUJDLE9BQVEsU0FBVUMsRUFBU0MsR0FDekJ0QixHQUFFLFdBQ0EsSUFBSXVCLEVBQWlCdkIsRUFBRSw4QkFDdkIsR0FBS3VCLEVBQWVWLFNBQVMsZUF1QjNCYixFQUFFLDZCQUNDZSxTQUFTLG1CQUNURCxZQUFZLGFBQ2ZTLEVBQWVULFlBQVksYUFDM0JTLEVBQ0daLEtBQUssaUNBQ0xQLEdBQUcsU0FBUyxXQUNYSixFQUFFLDZCQUE2QmMsWUFBWSxtQkFDM0NTLEVBQWVSLFNBQVMsWUFDMUIsU0EvQkYsR0FBSVEsRUFBZUMsT0FBUyxFQUFHLENBRTdCLElBQUlDLEVBQVFGLEVBQWVaLEtBQUssU0FDOUJlLEVBQWFELEVBQU1kLEtBQUssTUFBTWdCLEdBQUcsR0FBR2hCLEtBQUssTUFBTWdCLEdBQUcsR0FBR0MsT0FDckRDLEVBQVdKLEVBQU1kLEtBQUssTUFBTWdCLEdBQUcsR0FBR2hCLEtBQUssTUFBTWdCLEdBQUcsR0FBR0MsT0FDbkRFLEVBQWMsSUFBSUMsS0FHcEJOLEVBQU1ULFNBSUplLEtBQUtDLE1BQU1OLEdBQWNLLEtBQUtDLE1BQU1GLElBQ3BDQyxLQUFLQyxNQUFNSCxHQUFZRSxLQUFLQyxNQUFNRixLQUVsQzlCLEVBQUUsNkJBQ0NlLFNBQVMsbUJBQ1RELFlBQVksYUFDZlMsRUFBZVQsWUFBWSxhQUUvQixDQWFKLElBR0VkLEVBQUUsa0NBQWtDYSxTQUNsQyx5Q0FHRmIsRUFBRSw0QkFBNEJlLFNBQVMsWUFHekNmLEVBQUUseUNBQXlDSSxHQUFHLFFBQVMsWUFBWSxXQUNqRUosRUFBRSx5Q0FBeUNlLFNBQVMsYUFDcERmLEVBQUUsaURBQWlEYyxZQUFZLFNBQ2pFLElBR0FkLEVBQUUsUUFBUUksR0FBRyxRQUFTLG9CQUFvQixTQUFVQyxHQUM5Q0EsRUFBRTRCLFNBQVd6QixNQUdqQlIsRUFBRSxtREFBbURrQyxPQUN2RCxJQUdBbEMsRUFBRSw4Q0FDQ21DLElBQUksbUJBQ0ovQixHQUFHLFNBQVMsU0FBVUMsR0FDckJBLEVBQUVDLGlCQUNGTixFQUFFLHlDQUF5Q2UsU0FBUyxhQUNwRCxJQUlFcUIsRUFKRUMsRUFBS3JDLEVBQUVRLE1BQU04QixLQUFLLFFBQ3BCQyxFQUFZdkMsRUFBRSw2QkFDZHdDLEVBQWFELEVBQVU1QixLQUFLMEIsR0FDNUJJLEVBQWFELEVBQVc3QixLQUFLLGVBNEIvQixPQXhCQTZCLEVBQVd6QixTQUFTLG1CQUFtQkQsWUFBWSxhQUcvQzJCLEVBQVdqQixPQUFTLEVBQ3RCWSxFQUFZLElBRVpBLEVBQ0UsMElBQ0ZJLEVBQVc3QixLQUFLLDZCQUE2QitCLFFBQVFOLElBSXZESSxFQUFXN0IsS0FBSyxhQUFhUCxHQUFHLFNBQVMsV0FDdkNKLEVBQUVRLE1BQ0NFLFNBQ0FBLFNBQ0FBLFNBQ0FLLFNBQVMsYUFDVEQsWUFBWSxtQkFDZnlCLEVBQVU1QixLQUFLLFdBQVdJLFNBQVMsYUFDbkN3QixFQUFVNUIsS0FBSyxtQkFBbUJHLFlBQVksVUFDOUNkLEVBQUUsc0JBQXNCZ0IsUUFDMUIsSUFFUXFCLEdBRU4sSUFBSyxtQ0FDSEcsRUFBV3pCLFNBQVMsa0JBQ3BCeUIsRUFBVzdCLEtBQUssMkJBQTJCZ0MsTUFBSyxXQUM5QzNDLEVBQUVRLE1BQU1vQyxJQUFJLEdBQ2QsSUFDQUosRUFBVzdCLEtBQUssV0FBV3VCLFFBRTNCbEMsRUFBRSw0QkFBNEJrQyxPQUFNLFdBQ2xDLElBQUlXLEVBQVM3QyxFQUFFLCtCQUErQjRDLE1BQzFDRSxFQUFTOUMsRUFBRSxnQ0FBZ0M0QyxNQUMvQ0osRUFBVzdCLEtBQUssb0NBQW9DaUMsSUFBSUMsR0FDeERMLEVBQ0c3QixLQUFLLHFDQUNMaUMsSUFBSUUsR0FDUE4sRUFDRzdCLEtBQUssc0NBQ0xnQyxNQUFLLFdBQ0ozQyxFQUFFUSxNQUFNMEIsT0FDVixHQUNKLElBRUFNLEVBQVc3QixLQUFLLHlCQUF5QnVCLE9BQU0sU0FBVWEsR0FDdkRBLEVBQU16QyxpQkFDTixJQUFJMEMsRUFBT2hELEVBQUVRLE1BQU04QixLQUFLLGNBQ3hCRSxFQUFXN0IsS0FBSyx5QkFBeUJHLFlBQVksVUFDckRkLEVBQUVRLE1BQU1PLFNBQVMsVUFDTCxPQUFSaUMsSUFDRlIsRUFDRzdCLEtBQUssd0JBQ0xJLFNBQVMsY0FDWnlCLEVBQ0c3QixLQUFLLHdCQUNMRyxZQUFZLGVBRUwsUUFBUmtDLElBQ0ZSLEVBQ0c3QixLQUFLLHdCQUNMSSxTQUFTLGNBQ1p5QixFQUNHN0IsS0FBSyx3QkFDTEcsWUFBWSxjQUVuQixJQUVBMEIsRUFBVzdCLEtBQUssaUJBQWlCUCxHQUFHLFNBQVMsU0FBVUMsR0FDckRBLEVBQUVDLGlCQUNGLElBQUkyQyxFQUFLakQsRUFBRVEsTUFDUHlDLEVBQUdwQyxTQUFTLGlCQUNkb0MsRUFBR0MsU0FBUyxLQUFLdEIsS0FBSyxtQkFDdEJxQixFQUFHbkMsWUFBWSxnQkFDZjBCLEVBQVc3QixLQUFLLFlBQVlJLFNBQVMsZ0JBRXJDa0MsRUFBR0MsU0FBUyxLQUFLdEIsS0FBSyxtQkFDdEJxQixFQUFHbEMsU0FBUyxnQkFDWnlCLEVBQVc3QixLQUFLLFlBQVlHLFlBQVksY0FFNUMsSUFFQSxNQUVGLElBQUssd0JBQ0gsSUFBSXFDLEVBQWVYLEVBQVc3QixLQUFLLHdCQUNuQzZCLEVBQ0c3QixLQUFLLHlDQUNMZ0MsTUFBSyxTQUFVUyxFQUFLSCxHQUNuQixJQUFJSSxFQUFRckQsRUFBRWlELEdBQ1ZJLEVBQU1DLEdBQUcsYUFDWEQsRUFBTUUsS0FBSyxXQUFXLEVBRTFCLElBQ0M1QyxLQUFLLHlCQUNMSSxTQUFTLGFBQ1JmLEVBQUUsUUFBUWEsU0FBUyxlQUNyQnNDLEVBQWFyQyxZQUFZLDBCQUN6QnFDLEVBQ0d4QyxLQUFLLDhCQUNMRyxZQUFZLGNBQ2YwQixFQUFXN0IsS0FBSyx5QkFBeUJnQyxNQUFLLFdBQzVDM0MsRUFBRVEsTUFBTU8sU0FBUyxZQUNuQixJQUNBeUIsRUFBVzdCLEtBQUssY0FBY0csWUFBWSxhQUMxQzBCLEVBQVc3QixLQUFLLGlCQUFpQkssU0FHYyxJQUEzQ3dCLEVBQVc3QixLQUFLLGdCQUFnQmEsUUFDbENnQixFQUNHN0IsS0FBSyxlQUNMTSxPQUNDLHNHQU1OdUIsRUFBV3BDLEdBQUcsUUFBUyxnQkFBZ0IsV0FDckNvQyxFQUFXN0IsS0FBSyxhQUFhdUIsT0FDL0IsS0FHRk0sRUFDRzdCLEtBQUssNkNBQ0xQLEdBQUcsUUFBUyxnQkFBZ0IsU0FBVUMsR0FDckNBLEVBQUVDLGlCQUVGLElBQUlrRCxFQUFPaEIsRUFBVzdCLEtBQUssMkJBQTJCaUMsTUFDcERhLEVBQU9qQixFQUFXN0IsS0FBSyx3QkFBd0JpQyxNQUMvQ2MsRUFBWWxCLEVBQVc3QixLQUFLLG1CQUFtQmlDLE1BQy9DZSxFQUFPbkIsRUFBVzdCLEtBQUsscUJBQXFCaUMsTUFFcEMsSUFBUlksR0FDUSxJQUFSQyxHQUNhLElBQWJDLEdBQ2EsUUFBYkEsR0FFQTFELEVBQUVRLE1BQU1vRCxXQUFXLFlBRXJCcEIsRUFDRzdCLEtBQ0MsZ0ZBRURpQyxJQUFJWSxHQUNQaEIsRUFDRzdCLEtBQ0MsZ0ZBRURpQyxJQUFJYSxHQUNQakIsRUFDRzdCLEtBQ0MsaUZBRURpQyxJQUFJYyxHQUNQbEIsRUFDRzdCLEtBQ0MsMkRBRURpQyxJQUFJZSxHQUNQbkIsRUFDRzdCLEtBQ0MsNERBRUR1QixRQUVETSxFQUNHN0IsS0FBSyx5QkFDTEUsU0FBUyxjQUVaMkIsRUFDRzdCLEtBQUsseUJBQ0xHLFlBQVksWUFFbkIsSUFFRjBCLEVBQVc3QixLQUFLLGdCQUFnQlAsR0FBRyxTQUFTLFdBQzFDb0MsRUFBV3pCLFNBQVMsa0JBQ2hCZixFQUFFLFFBQVFhLFNBQVMsZUFDckIyQixFQUFXMUIsWUFBWSxrQkFDbkJxQyxFQUFhdEMsU0FBUyxhQUN4QnNDLEVBQ0dwQyxTQUFTLGdCQUNURCxZQUFZLG1CQUdyQixJQUVBLE1BRUYsSUFBSyxvQkFFQ2QsRUFBRSxRQUFRYSxTQUFTLGNBQ3JCZ0QsWUFBVyxXQUNUckIsRUFDRzdCLEtBQUssc0JBQ0xtRCxNQUFNLFdBQ05BLE9BQ0wsR0FBRyxJQUdMdEIsRUFBVzdCLEtBQUssb0NBQW9DaUMsSUFBSSxJQUNwREosRUFBVzdCLEtBQUssZUFBZUUsU0FBUyxjQUMxQzJCLEVBQVc3QixLQUFLLGVBQWVHLFlBQVksYUFHM0MwQixFQUFXN0IsS0FBSyx3QkFBd0JFLFNBQVMsY0FFakQyQixFQUNHN0IsS0FBSyx3QkFDTEcsWUFBWSxhQUVaMEIsRUFBVzdCLEtBQUssYUFBYUUsU0FBUyxjQUN6QzJCLEVBQVc3QixLQUFLLGFBQWFJLFNBQVMsYUFHdEN5QixFQUNHN0IsS0FBSywyQ0FDTEUsU0FBUyxjQUVaMkIsRUFDRzdCLEtBQUssMkNBQ0xHLFlBQVksYUFHakIwQixFQUFXN0IsS0FBSyxxQkFBcUJQLEdBQUcsU0FBUyxTQUFVQyxHQUN6REEsRUFBRUMsaUJBR0NrQyxFQUFXN0IsS0FBSyx3QkFBd0JFLFNBQVMsY0FFbEQyQixFQUNHN0IsS0FBSywyQkFDTEksU0FBUyxhQUdkLElBQUlnRCxFQUFXdkIsRUFBVzdCLEtBQUssZUFBZWlDLE1BSTVDb0IsRUFGRUMsZUFBZUMsS0FBS0MsUUFDcEIsOENBQ29CSixFQUV4Qi9ELEVBQUVvRSxLQUFLLENBQ0xDLElBQ0VKLGVBQWVDLEtBQUtDLFFBQ3BCLHlDQUNGbkIsS0FBTSxPQUNOc0IsU0FBVSxPQUNWQyxLQUNFLGdEQUFrRFIsRUFDcERTLFFBQVMsU0FBVUMsR0FDakJqQyxFQUFXN0IsS0FBSyxhQUFhK0QsS0FBS0QsRUFBUyxHQUFHRixLQUNoRCxJQUNDSSxNQUFLLFdBQ05uQyxFQUNHN0IsS0FDQywwREFFREssUUFDTCxJQUVBd0IsRUFDRzdCLEtBQUsseUJBQ0wyQixLQUFLLE9BQVEwQixHQUNoQnhCLEVBQ0c3QixLQUFLLHVDQUNMaUMsSUFBSW1CLEdBQ1B2QixFQUNHN0IsS0FBSyw2Q0FDTHVCLFFBRUVNLEVBQVc3QixLQUFLLGVBQWVFLFNBQVMsY0FDM0MyQixFQUFXN0IsS0FBSyxlQUFlSSxTQUFTLGFBSXZDeUIsRUFDRTdCLEtBQUssMkNBQ0xFLFNBQVMsY0FFWjJCLEVBQ0c3QixLQUFLLDJDQUNMSSxTQUFTLGFBR1Z5QixFQUFXN0IsS0FBSyxhQUFhRSxTQUFTLGNBQ3hDMkIsRUFBVzdCLEtBQUssYUFBYUcsWUFBWSxhQUl6Q2QsRUFBRSxtREFBbURhLFNBQ25ELGNBR0ZiLEVBQ0UsbURBQ0FjLFlBQVksYUFHaEJkLEVBQUVHLEdBQVV5RSxVQUFTLFdBQ25CcEMsRUFDRzdCLEtBQUsseUJBQ0wyQixLQUFLLE9BQVEwQixFQUNsQixHQUNGLElBSU4sSUFHRmhFLEVBQUU2RSxRQUFRLDhCQUE4QixTQUFVTixHQUNoRHZFLEVBQUUyQyxLQUFLNEIsR0FBTSxTQUFVTyxFQUFLbEMsR0FDMUI1QyxFQUFFLCtCQUErQmlCLE9BQy9CakIsRUFBRSxXQUFZLENBQ1orRSxNQUFPbkMsRUFBSW9DLE1BQ1hwRCxLQUFNZ0IsRUFBSW9DLFFBR2hCLEdBQ0YsR0FDRixFQUVILENBM2FELENBMmFHQyxPQUFRaEYsT0FBUU8sRUFBTUEsS0FBS0wiLCJpZ25vcmVMaXN0IjpbXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkLCBEcnVwYWwsIHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgJChcIiNibG9jay1oZGktcG9ydGFsLWJ1c2Nhc2F5dWRhXCIpLm9uKFwiY2xpY2tcIiwgXCIjc2hvdy1tZW51LWhlbHBcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBsZXQgYm90b24gPSAkKHRoaXMpLFxuICAgICAgbWVudSA9IGJvdG9uLnBhcmVudChcIiNibG9jay1oZGktcG9ydGFsLWJ1c2Nhc2F5dWRhXCIpLmZpbmQoXCJ1bC5tZW51XCIpLFxuICAgICAgYm9keSA9ICQoXCJib2R5XCIpO1xuICAgIC8vIGNvbnNvbGUubG9nKGJvdG9uLmhhc0NsYXNzKCdhY3RpdmUnKSk7XG4gICAgaWYgKGJvdG9uLmhhc0NsYXNzKFwiYWN0aXZlXCIpKSB7XG4gICAgICBib3Rvbi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgIG1lbnUuYWRkQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICBpZiAoYm9keS5oYXNDbGFzcyhcImpzLW1vYmlsZVwiKSkge1xuICAgICAgICAkKFwiLm92ZXJsYXktYnVzY2F5dWRhXCIpLnJlbW92ZSgpO1xuICAgICAgICBib2R5LnJlbW92ZUNsYXNzKFwiYWJpZXJ0by1henVsXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBib3Rvbi5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgIG1lbnUucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICBpZiAoYm9keS5oYXNDbGFzcyhcImpzLW1vYmlsZVwiKSkge1xuICAgICAgICBib2R5LmFwcGVuZCgnPGRpdiBjbGFzcz1cIm92ZXJsYXktYnVzY2F5dWRhXCI+PC9kaXY+Jyk7XG4gICAgICAgIGJvZHkuYWRkQ2xhc3MoXCJhYmllcnRvLWF6dWxcIik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBNZW51IGhlbHBcbiAgRHJ1cGFsLmJlaGF2aW9ycy5tZW51SGVscEpTID0ge1xuICAgIGF0dGFjaDogZnVuY3Rpb24gKGNvbnRleHQsIHNldHRpbmdzKSB7XG4gICAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IG1vZGFsX2ZhbGxiYWNrID0gJChcIi5tb2RhbC1saW5rLWZhbGxiYWNrLXBvcHVwXCIpO1xuICAgICAgICBpZiAoIW1vZGFsX2ZhbGxiYWNrLmhhc0NsYXNzKFwibW9kYWwtY2xvc2VcIikpIHtcbiAgICAgICAgICBpZiAobW9kYWxfZmFsbGJhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gR2V0IGRhdGVzXG4gICAgICAgICAgICBsZXQgdGFibGUgPSBtb2RhbF9mYWxsYmFjay5maW5kKFwidGFibGVcIiksXG4gICAgICAgICAgICAgIHN0YXJ0X2RhdGUgPSB0YWJsZS5maW5kKFwidHJcIikuZXEoMCkuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcbiAgICAgICAgICAgICAgZW5kX2RhdGUgPSB0YWJsZS5maW5kKFwidHJcIikuZXEoMSkuZmluZChcInRkXCIpLmVxKDEpLnRleHQoKSxcbiAgICAgICAgICAgICAgYWN0dWFsX2RhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGFibGVcbiAgICAgICAgICAgIHRhYmxlLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAvLyBDb21wYXJlIGRhdGVzXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIERhdGUucGFyc2Uoc3RhcnRfZGF0ZSkgPCBEYXRlLnBhcnNlKGFjdHVhbF9kYXRlKSAmJlxuICAgICAgICAgICAgICBEYXRlLnBhcnNlKGVuZF9kYXRlKSA+IERhdGUucGFyc2UoYWN0dWFsX2RhdGUpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgJChcIiNibG9ja3MtbmVjZXNlY2l0YXMtYXl1ZGFcIilcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpcy1maXhlZC1nbG9iYWxcIilcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICAgIG1vZGFsX2ZhbGxiYWNrLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKFwiI2Jsb2Nrcy1uZWNlc2VjaXRhcy1heXVkYVwiKVxuICAgICAgICAgICAgLmFkZENsYXNzKFwiaXMtZml4ZWQtZ2xvYmFsXCIpXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgbW9kYWxfZmFsbGJhY2sucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgbW9kYWxfZmFsbGJhY2tcbiAgICAgICAgICAgIC5maW5kKFwic3Bhbi5tb2RhbC1jbG9zZSwgc3Bhbi5idXR0b25cIilcbiAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgJChcIiNibG9ja3MtbmVjZXNlY2l0YXMtYXl1ZGFcIikucmVtb3ZlQ2xhc3MoXCJpcy1maXhlZC1nbG9iYWxcIik7XG4gICAgICAgICAgICAgIG1vZGFsX2ZhbGxiYWNrLmFkZENsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoXG4gICAgICAgICQoXCIjYmxvY2stc2luaXN0ZXJ0aGFua3lvdW1lc3NhZ2VcIikuaGFzQ2xhc3MoXG4gICAgICAgICAgXCJibG9jay1zaW5pc3Rlci1ub3RpZmljYXRpb24tdGhhbmt5b3VcIlxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgJChcIi5jb21wb25lbnRfX2RydXBhbC1ibG9ja1wiKS5hZGRDbGFzcyhcInRoYW5reW91XCIpO1xuICAgICAgfVxuXG4gICAgICAkKFwiI2Jsb2NrLWhkaS1wb3J0YWwtYnVzY2FzYXl1ZGEgdWwubWVudVwiKS5vbihcImNsaWNrXCIsIFwibGkuY2xvc2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI2Jsb2NrLWhkaS1wb3J0YWwtYnVzY2FzYXl1ZGEgdWwubWVudVwiKS5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgJChcIiNibG9jay1oZGktcG9ydGFsLWJ1c2Nhc2F5dWRhICNzaG93LW1lbnUtaGVscFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbG9zZSBtb2RhbCBvbiBjbGljayBvdXRzaWRlIG1vZGFsIGNvbnRlbnRcbiAgICAgICQoXCJib2R5XCIpLm9uKFwiY2xpY2tcIiwgXCIuaXMtZml4ZWQtZ2xvYmFsXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAkKFwiI2Jsb2Nrcy1uZWNlc2VjaXRhcy1heXVkYSAuaGVhZC1tb2RhbCAjY2xvc2UtbWJcIikuY2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBoZWxwIG1lbnVcbiAgICAgICQoXCIjYmxvY2staGRpLXBvcnRhbC1idXNjYXNheXVkYSB1bC5tZW51IGxpIGFcIilcbiAgICAgICAgLm5vdChcIi5jaGF0LCAubm9wb3B1cFwiKVxuICAgICAgICAub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAkKFwiI2Jsb2NrLWhkaS1wb3J0YWwtYnVzY2FzYXl1ZGEgdWwubWVudVwiKS5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpLFxuICAgICAgICAgICAgbWVudV9oZWxwID0gJChcIiNibG9ja3MtbmVjZXNlY2l0YXMtYXl1ZGFcIiksXG4gICAgICAgICAgICBibG9ja19oZWxwID0gbWVudV9oZWxwLmZpbmQoaWQpLFxuICAgICAgICAgICAgaGVhZF9tb2RhbCA9IGJsb2NrX2hlbHAuZmluZChcIi5oZWFkLW1vZGFsXCIpLFxuICAgICAgICAgICAgY2xvc2VfYnRuO1xuXG4gICAgICAgICAgLy8gc2hvdyBibG9ja1xuICAgICAgICAgIGJsb2NrX2hlbHAuYWRkQ2xhc3MoXCJpcy1maXhlZC1nbG9iYWxcIikucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG5cbiAgICAgICAgICAvLyBhZGQgY2xvc2UgYnV0dG9uXG4gICAgICAgICAgaWYgKGhlYWRfbW9kYWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY2xvc2VfYnRuID0gXCJcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xvc2VfYnRuID1cbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkLW1vZGFsXCI+PHNwYW4gaWQ9XCJjbG9zZS1tYlwiIGNsYXNzPVwiY2xvc2VcIj48aW1nIHNyYz1cIi90aGVtZXMvY3VzdG9tL2xpYmVydHlfcHVibGljL2ltYWdlcy9pY29ucy9jbG9zZS5zdmdcIj48L3NwYW4+PC9kaXY+JztcbiAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5maWVsZC0tbmFtZS1maWVsZC1iYW5uZXJcIikucHJlcGVuZChjbG9zZV9idG4pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGhpZGUgYmxvY2tcbiAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIjY2xvc2UtbWJcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAgIC5hZGRDbGFzcyhcImlzLWhpZGRlblwiKVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpcy1maXhlZC1nbG9iYWxcIik7XG4gICAgICAgICAgICBtZW51X2hlbHAuZmluZChcInVsLm1lbnVcIikuYWRkQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICBtZW51X2hlbHAuZmluZChcIiNzaG93LW1lbnUtaGVscFwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICQoXCIub3ZlcmxheS1idXNjYXl1ZGFcIikucmVtb3ZlKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBzd2l0Y2ggKGlkKSB7XG4gICAgICAgICAgICAvLyBwYXltZW50IHBvaW50c1xuICAgICAgICAgICAgY2FzZSBcIiNibG9jay1idXNjYWRvcnB1bnRvc2RlcGFnb3BvcHVwXCI6XG4gICAgICAgICAgICAgIGJsb2NrX2hlbHAuYWRkQ2xhc3MoXCJuby10cmFuc2Zvcm0teVwiKTtcbiAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiI2VkaXQtbmFtZSwgI2VkaXQtdGl0bGVcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIuYnV0dG9uXCIpLmNsaWNrKCk7XG5cbiAgICAgICAgICAgICAgJChcIiNmaWx0ZXJzLXBheW1lbnQgLmJ1dHRvblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNpdWRhZCA9ICQoXCIjZmlsdGVycy1wYXltZW50ICNlZGl0LW5hbWVcIikudmFsKCk7XG4gICAgICAgICAgICAgICAgbGV0IG5vbWJyZSA9ICQoXCIjZmlsdGVycy1wYXltZW50ICNlZGl0LXRpdGxlXCIpLnZhbCgpO1xuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZCgnLnZpZXctZmlsdGVycyBpbnB1dFtuYW1lPVwibmFtZVwiXScpLnZhbChjaXVkYWQpO1xuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgIC5maW5kKCcudmlldy1maWx0ZXJzIGlucHV0W25hbWU9XCJ0aXRsZVwiXScpXG4gICAgICAgICAgICAgICAgICAudmFsKG5vbWJyZSk7XG4gICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgLmZpbmQoJy52aWV3LWZpbHRlcnMgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXScpXG4gICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIub3B0aW9ucy1yZXN1bHRzIGxpIGFcIikuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBsZXQgdHlwZSA9ICQodGhpcykuYXR0cihcImNkYXRhLXR5cGVcIik7XG4gICAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiLm9wdGlvbnMtcmVzdWx0cyBsaSBhXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJtYXBcIikge1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5saXN0LXBvaW50cy1wYXltZW50XCIpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLm1hcGEtcG9pbnRzLXBheW1lbnRcIilcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKFwiaXMtZGVza3RvcFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJsaXN0XCIpIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIubWFwYS1wb2ludHMtcGF5bWVudFwiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpcy1kZXNrdG9wXCIpO1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5saXN0LXBvaW50cy1wYXltZW50XCIpXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIuc2hvdy1maWx0ZXJzXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICBpZiAoZWwuaGFzQ2xhc3MoXCJmaWx0ZXJzLW9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuKFwiYVwiKS50ZXh0KFwiTW9zdHJhciBmaWx0cm9zXCIpO1xuICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQ2xhc3MoXCJmaWx0ZXJzLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIuZmlsdGVyc1wiKS5hZGRDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGVsLmNoaWxkcmVuKFwiYVwiKS50ZXh0KFwiT2N1bHRhciBmaWx0cm9zXCIpO1xuICAgICAgICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJmaWx0ZXJzLW9wZW5cIik7XG4gICAgICAgICAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIuZmlsdGVyc1wiKS5yZW1vdmVDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIG1lZGljYWwgbmV0d29ya1xuICAgICAgICAgICAgY2FzZSBcIiNibG9jay1yZWRtZWRpY2Fwb3B1cFwiOlxuICAgICAgICAgICAgICBsZXQgYmxvY2tfc2VhcmNoID0gYmxvY2tfaGVscC5maW5kKFwiLndyYXBwZXItZm9ybS1zZWFyY2hcIik7XG4gICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAuZmluZChcIiNlZGl0LXBsYW4tdHlwZSBpbnB1dFtuYW1lPXBsYW5fdHlwZV1cIilcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaW5kLCBlbCkge1xuICAgICAgICAgICAgICAgICAgbGV0IHJhZGlvID0gJChlbCk7XG4gICAgICAgICAgICAgICAgICBpZiAocmFkaW8uaXMoXCI6Y2hlY2tlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICByYWRpby5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZmluZChcIi5tYXBhLXJlZG1lZGljYS1wb3B1cFwiKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAgICAgaWYgKCQoXCJib2R5XCIpLmhhc0NsYXNzKFwianMtbW9iaWxlXCIpKSB7XG4gICAgICAgICAgICAgICAgYmxvY2tfc2VhcmNoLnJlbW92ZUNsYXNzKFwidHJhbnNmb3JtLXVwLCBpcy1maXhlZFwiKTtcbiAgICAgICAgICAgICAgICBibG9ja19zZWFyY2hcbiAgICAgICAgICAgICAgICAgIC5maW5kKFwiI2VkaXQtcGxhbi10eXBlIC5mb3JtLWl0ZW1cIilcbiAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiI2dwX2Zvcm0sIC5jdG4tZm9vdGVyXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBibG9ja19oZWxwLmZpbmQoXCIuZm9ybS1pdGVtXCIpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5jbG9zZS1maWx0ZXJcIikucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgY2FuY2VsIGJ1dHRvblxuICAgICAgICAgICAgICAgIGlmIChibG9ja19oZWxwLmZpbmQoXCIuZm9ybS1jYW5jZWxcIikubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLmN0bi1mb290ZXJcIilcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImZvcm0taXRlbVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBjbGFzcz1cImJ0biBidXR0b24gZm9ybS1jYW5jZWxcIiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJDYW5jZWxhclwiPjwvZGl2PidcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY2xvc2Ugb24gY2FuY2VsXG4gICAgICAgICAgICAgICAgYmxvY2tfaGVscC5vbihcImNsaWNrXCIsIFwiLmZvcm0tY2FuY2VsXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIiNjbG9zZS1tYlwiKS5jbGljaygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmJsb2NrLXNlYXJjaC1tZWRpY2FsLW5ldHdvcmsgLmN0bi1mb290ZXJcIilcbiAgICAgICAgICAgICAgICAub24oXCJjbGlja1wiLCBcIi5mb3JtLXN1Ym1pdFwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICBsZXQgcGxhbiA9IGJsb2NrX2hlbHAuZmluZChcImlucHV0W25hbWU9J3BsYW5fdHlwZSddXCIpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBjaXR5ID0gYmxvY2tfaGVscC5maW5kKFwiaW5wdXRbbmFtZT0naF9jaXR5J11cIikudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpYWx0eSA9IGJsb2NrX2hlbHAuZmluZChcIiNlZGl0LXNwZWNpYWx0eVwiKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgd29yZCA9IGJsb2NrX2hlbHAuZmluZChcIiNlZGl0LXNlYXJjaC13b3JkXCIpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBwbGFuICE9IFwiXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgY2l0eSAhPSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpYWx0eSAhPSBcIlwiICYmXG4gICAgICAgICAgICAgICAgICAgIHNwZWNpYWx0eSAhPSBcIm5vbmVcIlxuICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAnLm1hcGEtcmVkbWVkaWNhLXBvcHVwIC52aWV3LWZpbHRlcnMgc2VsZWN0W25hbWU9XCJmaWVsZF90eXBlX3BsYW5fdGFyZ2V0X2lkXCJdJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC52YWwocGxhbik7XG4gICAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgICcubWFwYS1yZWRtZWRpY2EtcG9wdXAgLnZpZXctZmlsdGVycyBzZWxlY3RbbmFtZT1cImZpZWxkX3ViaWNhdGlvbl90YXJnZXRfaWRcIl0nXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnZhbChjaXR5KTtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgJy5tYXBhLXJlZG1lZGljYS1wb3B1cCAudmlldy1maWx0ZXJzIHNlbGVjdFtuYW1lPVwiZmllbGRfc3BlY2lhbGl0eV90YXJnZXRfaWRcIl0nXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLnZhbChzcGVjaWFsdHkpO1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcbiAgICAgICAgICAgICAgICAgICAgICAnLm1hcGEtcmVkbWVkaWNhLXBvcHVwIC52aWV3LWZpbHRlcnMgaW5wdXRbbmFtZT1cInRpdGxlXCJdJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC52YWwod29yZCk7XG4gICAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFxuICAgICAgICAgICAgICAgICAgICAgICcubWFwYS1yZWRtZWRpY2EtcG9wdXAgLnZpZXctZmlsdGVycyBpbnB1dFt0eXBlPVwic3VibWl0XCJdJ1xuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIubWFwYS1yZWRtZWRpY2EtcG9wdXBcIilcbiAgICAgICAgICAgICAgICAgICAgICAuaGFzQ2xhc3MoXCJpcy1oaWRkZW5cIilcbiAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIubWFwYS1yZWRtZWRpY2EtcG9wdXBcIilcbiAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiI2VkaXQtc2VhcmNoXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuYWRkQ2xhc3MoXCJuby10cmFuc2Zvcm0teVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJqcy1tb2JpbGVcIikpIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAucmVtb3ZlQ2xhc3MoXCJuby10cmFuc2Zvcm0teVwiKTtcbiAgICAgICAgICAgICAgICAgIGlmIChibG9ja19zZWFyY2guaGFzQ2xhc3MoXCJpcy1maXhlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja19zZWFyY2hcbiAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ0cmFuc2Zvcm0tdXBcIilcbiAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJ0cmFuc2Zvcm0tbWVkaWFcIik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIGZhcXNcbiAgICAgICAgICAgIGNhc2UgXCIjYmxvY2stZmFxc3BvcHVwc1wiOlxuICAgICAgICAgICAgICAvLyByZWluaXQgc2xpY2sgb24gbW9iaWxlXG4gICAgICAgICAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImpzLW1vYmlsZVwiKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zbGljay1pbml0aWFsaXplZFwiKVxuICAgICAgICAgICAgICAgICAgICAuc2xpY2soXCJ1bnNsaWNrXCIpXG4gICAgICAgICAgICAgICAgICAgIC5zbGljaygpO1xuICAgICAgICAgICAgICAgIH0sIDEwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5mb3JtLWJ1c2NhZG9yLXBvcHVwICNlZGl0LXRpdGxlXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgaWYgKGJsb2NrX2hlbHAuZmluZChcIi5mcmVjdWVudGVzXCIpLmhhc0NsYXNzKFwiaXMtaGlkZGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiLmZyZWN1ZW50ZXNcIikucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5mb3JtLWJ1c2NhZG9yLXBvcHVwXCIpLmhhc0NsYXNzKFwiaXMtaGlkZGVuXCIpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgIC5maW5kKFwiLmZvcm0tYnVzY2Fkb3ItcG9wdXBcIilcbiAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIWJsb2NrX2hlbHAuZmluZChcIi5idXNjYWRvclwiKS5oYXNDbGFzcyhcImlzLWhpZGRlblwiKSkge1xuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5idXNjYWRvclwiKS5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuY29tcG9uZW50X192aWV3LS1jYXRlZ29yaWFzLWRvY3VtZW50b3NcIilcbiAgICAgICAgICAgICAgICAgIC5oYXNDbGFzcyhcImlzLWhpZGRlblwiKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAuZmluZChcIi5jb21wb25lbnRfX3ZpZXctLWNhdGVnb3JpYXMtZG9jdW1lbnRvc1wiKVxuICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiI2VkaXQtc3VibWl0LWZhcXNcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFibG9ja19oZWxwLmZpbmQoXCIuYnVzY2Fkb3JpZXctZmlsdGVyc1wiKS5oYXNDbGFzcyhcImlzLWhpZGRlblwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5idXNjYWRvciAudmlldy1maWx0ZXJzXCIpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQga2V5d29yZHMgPSBibG9ja19oZWxwLmZpbmQoXCIjZWRpdC10aXRsZVwiKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgIGhyZWYgPVxuICAgICAgICAgICAgICAgICAgICBkcnVwYWxTZXR0aW5ncy5wYXRoLmJhc2VVcmwgK1xuICAgICAgICAgICAgICAgICAgICBcInpvbmEtZGUtY2xpZW50ZS9wcmVndW50YXMtZnJlY3VlbnRlcz90aXRsZT1cIixcbiAgICAgICAgICAgICAgICAgIGhyZWZfdmVyX21hcyA9IGhyZWYgKyBrZXl3b3JkcztcblxuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICB1cmw6XG4gICAgICAgICAgICAgICAgICAgIGRydXBhbFNldHRpbmdzLnBhdGguYmFzZVVybCArXG4gICAgICAgICAgICAgICAgICAgIFwidmlld3MvYWpheD9fd3JhcHBlcl9mb3JtYXQ9ZHJ1cGFsX2FqYXhcIixcbiAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgICAgICAgZGF0YTpcbiAgICAgICAgICAgICAgICAgICAgXCJ2aWV3X25hbWU9ZmFxcyZ2aWV3X2Rpc3BsYXlfaWQ9YmxvY2tfNCZ0aXRsZT1cIiArIGtleXdvcmRzLFxuICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5idXNjYWRvclwiKS5odG1sKHJlc3BvbnNlWzNdLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoXG4gICAgICAgICAgICAgICAgICAgICAgXCIuYnVzY2Fkb3IgLnZpZXctZmFxcyAudmlldy1maWx0ZXJzIC52aWV3cy1leHBvc2VkLWZvcm1cIlxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnZpZXctZm9vdGVyIGEuYnV0dG9uXCIpXG4gICAgICAgICAgICAgICAgICAuYXR0cihcImhyZWZcIiwgaHJlZl92ZXJfbWFzKTtcbiAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAuZmluZChcIi5idXNjYWRvciAudmlldy1maWx0ZXJzICNlZGl0LXRpdGxlXCIpXG4gICAgICAgICAgICAgICAgICAudmFsKGtleXdvcmRzKTtcbiAgICAgICAgICAgICAgICBibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAuZmluZChcIi5idXNjYWRvciAudmlldy1maWx0ZXJzICNlZGl0LXN1Ym1pdC1mYXFzXCIpXG4gICAgICAgICAgICAgICAgICAuY2xpY2soKTtcblxuICAgICAgICAgICAgICAgIGlmICghYmxvY2tfaGVscC5maW5kKFwiLmZyZWN1ZW50ZXNcIikuaGFzQ2xhc3MoXCJpcy1oaWRkZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHAuZmluZChcIi5mcmVjdWVudGVzXCIpLmFkZENsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFibG9ja19oZWxwXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLmNvbXBvbmVudF9fdmlldy0tY2F0ZWdvcmlhcy1kb2N1bWVudG9zXCIpXG4gICAgICAgICAgICAgICAgICAgIC5oYXNDbGFzcyhcImlzLWhpZGRlblwiKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscFxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5jb21wb25lbnRfX3ZpZXctLWNhdGVnb3JpYXMtZG9jdW1lbnRvc1wiKVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrX2hlbHAuZmluZChcIi5idXNjYWRvclwiKS5oYXNDbGFzcyhcImlzLWhpZGRlblwiKSkge1xuICAgICAgICAgICAgICAgICAgYmxvY2tfaGVscC5maW5kKFwiLmJ1c2NhZG9yXCIpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICQoXCIuZm9ybS1idXNjYWRvci1wb3B1cCAudGl0bGUtYnVzY2Fkb3ItZmFxcy1wb3B1cFwiKS5oYXNDbGFzcyhcbiAgICAgICAgICAgICAgICAgICAgXCJpcy1oaWRkZW5cIlxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgJChcbiAgICAgICAgICAgICAgICAgICAgXCIuZm9ybS1idXNjYWRvci1wb3B1cCAudGl0bGUtYnVzY2Fkb3ItZmFxcy1wb3B1cFwiXG4gICAgICAgICAgICAgICAgICApLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLmFqYXhTdG9wKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIGJsb2NrX2hlbHBcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIudmlldy1mb290ZXIgYS5idXR0b25cIilcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJocmVmXCIsIGhyZWZfdmVyX21hcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgIC8vIEdldCBhbGwgY2l0aWVzXG4gICAgICAkLmdldEpTT04oXCIvY2l0aWVzLWF1dG9jb21wbGV0ZS8wL2FsbFwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAkLmVhY2goZGF0YSwgZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gICAgICAgICAgJChcIiNmaWx0ZXJzLXBheW1lbnQgI2VkaXQtbmFtZVwiKS5hcHBlbmQoXG4gICAgICAgICAgICAkKFwiPG9wdGlvbj5cIiwge1xuICAgICAgICAgICAgICB2YWx1ZTogdmFsLmxhYmVsLFxuICAgICAgICAgICAgICB0ZXh0OiB2YWwubGFiZWwsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgfTtcbn0pKGpRdWVyeSwgRHJ1cGFsLCB0aGlzLCB0aGlzLmRvY3VtZW50KTtcbiJdfQ==
