!function(e,s,i,o){"use strict";s.behaviors.themeJS={attach:function(s,n){o.documentElement.setAttribute("data-browser",i.navigator.userAgent);let a=function(){e(i).width()<=978?e("body").addClass("js-mobile"):e("body").removeClass("js-mobile")};a(),e(i).resize(a),e(o).ajaxStop((function(){a()})),e(".addtoany_list").insertAfter(".component__banner.cp-banner"),e(".link__external").attr("target","_blank"),e(".link__anchor").on("click",(function(s){s.preventDefault();let i=e(this).attr("href");e("html, body").stop(!0,!0).animate({scrollTop:e(i).offset().top},1e3)})),e("#nav__secundario").on("click","#buscador",(function(){e("#nav__secundario").addClass("is-hidden"),e(this).addClass("buscador__input--activo")})).on("blur, focusout","#edit-keywords",(function(){void 0!==e(this).val()&&""!==e(this).val()||(e(this).removeClass("buscador__input--activo"),e("#nav__secundario").show(205).removeClass("is-hidden"))})),e("#buscador__close").click((function(){e("#navegacion").removeClass("is-visible")}));let t=function(e){let s=new RegExp("[?&]"+e+"=([^&#]*)").exec(i.location.href);return null==s?null:decodeURI(s[1])||0};if(e(".alias--zona-de-cliente-condicionados-y-documentos").length>0||e(".alias--zona-de-cliente-preguntas-frecuentes").length>0){let s=e(".breadcrumb ol li").last().text(),o=!0,n="",a="",l="";e("body").hasClass("alias--zona-de-cliente-condicionados-y-documentos")&&(n=".documentos-por-categoria",l=".buscador-documentos",a=".documentos-frecuentes",e(".img-no-results").length>1&&e(".viewsreference--view-title").css("display","none")),e("body").hasClass("alias--zona-de-cliente-preguntas-frecuentes")&&(n=".resultados-categoria",l=".buscador-landing",a=".items-frecuentes"),e(".breadcrumb ol li").last().html('<a  href="'+i.location.pathname+'">'+s+"</a>"),null!==t("category")&&(e(n).removeClass("is-hidden"),o=!1),null!==t("title")&&(e(l).removeClass("is-hidden"),o=!1),o&&(e(".component__view--categorias-documentos").removeClass("is-hidden"),e(a).removeClass("is-hidden"))}var l;if(e(".view-display-id-faqs_categories_block").on("click",".views-field-field-cta a",(function(s){s.preventDefault();let i=e(this).parents(".views-row"),o=i.find(".preguntas"),n=i.height();if(o.hasClass("is-hidden")){e(".preguntas").addClass("is-hidden"),o.removeClass("is-hidden");let s=o.height();e("body").hasClass("js-mobile")&&(o.css("bottom",s+"px"),i.css("height",parseInt(s+n+30)))}else o.addClass("is-hidden"),e("body").hasClass("js-mobile")&&i.css("height","auto")})),e(".verMapa").on("click",(function(){let s=e(this),i=s.attr("lat"),n=s.attr("lng"),a=s.attr("dir"),t=s.attr("title"),l=s.attr("counter"),c=s.attr("telephone"),r=s.children("i").html();e(".wrapper__map").removeClass("is-hidden"),function(s,i,n){let a=s,t={url:"",scaledSize:new google.maps.Size(60,60)},l=" ";void 0!==n&&(l=n),e("body").hasClass("alias--oficinas")?t.url="/themes/custom/liberty_public/images/icons/icon-oficina.svg":t.url="/themes/custom/liberty_public/images/icons/pin-map-red.svg",a+=.002,e("body").hasClass("alias--nuestras-oficinas")&&(a+=.003);let c=new google.maps.Map(o.getElementById("map"),{zoom:16,center:{lat:a,lng:i}});new google.maps.Marker({position:{lat:s,lng:i},optimized:!1,map:c,icon:t,label:{text:l,color:"#ffffff"}})}(parseFloat(i),parseFloat(n),l),s.hasClass("mapaSucursal")?e("#infomap").html('<div class=\'content__infomap\'><div class="tooltip"><span class="tooltiptext">'+l+'</span></div><span class="close"></span><h2>'+t+'</h2><div class="info">\n<div class="info-right">\n  <p class="red__direccion"><span>'+a+'</span></p>\n  <p class="red__telefonos"><span class="name-element-office">Teléfonos</span>'+c+'</p>\n  <p class="horarios"> \n<span style="\n    display: block;\n">Horario de atención</span>\n'+r+"\n</p>\n</div>\n</div>"):s.hasClass("payment_points")?e("#infomap").html("<div class='content__infomap'><span class=\"close\"></span><h2>"+t+'</h2><div class="info"><div class="red__direccion"><p class="info-right">'+a+'</p></div><p class="red__telefonos">'+c+"</p></div></div></div>"):e("#infomap").html("<div class='content__infomap'><span class=\"close\"></span><h2>"+t+"</h2><p>"+a+"</p></div>")})),e(".verInfo").click((function(){let s=e(this);if(s.parent().hasClass("views-row")){s.parent().find(".popup-info").addClass("is-fixed-global")}else{s.parent().parent().addClass("is-fixed-global")}wrapper.find(".info p").each((function(){let s=e(this);s.hasClass("is-desktop")&&(s.removeClass("is-desktop"),s.addClass("is-mobile"))}))})),e(".arrowBack").click((function(){let s=e(this);if(s.parent().hasClass("popup-info")){s.parent()}wrapper.removeClass("is-fixed-global").find(".info p").each((function(){let s=e(this);s.hasClass("is-mobile")&&(s.removeClass("is-mobile"),s.addClass("is-desktop"))}))})),e(".info .header__info #close").click((function(){e(this).parent().parent().removeClass("is-active")})),e(".wrapper__map").on("click",".close, #close",(function(){e(".wrapper__map").addClass("is-hidden")})),e(".options-accordion .option .views-field-nothing").hover((function(){e(this).siblings(".options-accordion .option .views-field-description__value").addClass("open"),e(this).parent(".option").parent(".options-accordion").css("overflow","initial")}),(function(){e(".options-accordion .option .views-field-description__value").removeClass("open"),e(".js-accordion-options").css("overflow","hidden")})),l=".component__form--red-medica .component__content",e(".component__form--red-medica .component__content").removeAttr("href"),e(l).on("click",(function(e){})),e(".alias--siniestros-talleres-preferenciales .view-talleres .form-select").on("change",(function(){e(".alias--siniestros-talleres-preferenciales .view-talleres .js-form-submit").click()})),e(".text_file_error_input").change((function(){const s=e("input[type=file]").val().split("\\").pop().split(".").pop();"pdf"!=s&&"gif"!=s&&"jpg"!=s&&"png"!=s&&"txt"!=s&&"doc"!=s&&"docx"!=s&&"ppt"!=s&&"pptx"!=s&&"xls"!=s&&"xls"!=s&&"zip"!=s?e(".text_file_error").css("display","block"):e(".text_file_error").css("display","none")})),e(".text_file_error_input_2").change((function(){let s=e(".text_file_error_input_2").find('input[name="files[adjuntar_archivos]"]');s=s.val().split("\\").pop(),s=s.split(".").pop(),console.log(s),"pdf"!=s?e(".text_file_error2").css("display","block"):e(".text_file_error2").css("display","none")})),e(".form-item-adjuntar-archivos")){let s=e(this).find("label").html();s+="<br>"}}}}(jQuery,Drupal,this,this.document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm5hbWVzIjpbIiQiLCJEcnVwYWwiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImJlaGF2aW9ycyIsInRoZW1lSlMiLCJhdHRhY2giLCJjb250ZXh0Iiwic2V0dGluZ3MiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJjaGVja1dpbmRvd1dpZHRoIiwid2lkdGgiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicmVzaXplIiwiYWpheFN0b3AiLCJpbnNlcnRBZnRlciIsImF0dHIiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0ckFuY2xhIiwidGhpcyIsInN0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwidW5kZWZpbmVkIiwidmFsIiwic2hvdyIsImNsaWNrIiwidXJsUGFyYW0iLCJuYW1lIiwicmVzdWx0cyIsIlJlZ0V4cCIsImV4ZWMiLCJsb2NhdGlvbiIsImhyZWYiLCJkZWNvZGVVUkkiLCJsZW5ndGgiLCJicmVhZCIsImxhc3QiLCJ0ZXh0IiwiZmxhZ19pc19sYW5kaW5nIiwiY2F0ZWdvcmlhIiwiZnJlY3VlbnRlcyIsImJ1c2NhZG9yIiwiaGFzQ2xhc3MiLCJjc3MiLCJodG1sIiwicGF0aG5hbWUiLCJidXR0b24iLCJldmVudCIsInBhcmVudF9yb3ciLCJwYXJlbnRzIiwicXVlc3Rpb25zIiwiZmluZCIsImhlaVJvdyIsImhlaWdodCIsImhlaSIsInBhcnNlSW50IiwiZWwiLCJsYXRpIiwibG9uZ2kiLCJkaXJlYyIsInRpdGxlIiwiY291bnRlciIsInRlbCIsInNjaGVkdWxlIiwiY2hpbGRyZW4iLCJsbmdpIiwiY2VudGVyTGF0aSIsImltYWdlIiwidXJsIiwic2NhbGVkU2l6ZSIsImdvb2dsZSIsIm1hcHMiLCJTaXplIiwibnVtQ291bnRlciIsIm1hcCIsIk1hcCIsImdldEVsZW1lbnRCeUlkIiwiem9vbSIsImNlbnRlciIsImxhdCIsImxuZyIsIk1hcmtlciIsInBvc2l0aW9uIiwib3B0aW1pemVkIiwiaWNvbiIsImxhYmVsIiwiY29sb3IiLCJpbml0TWFwIiwicGFyc2VGbG9hdCIsInBhcmVudCIsIndyYXBwZXIiLCJlYWNoIiwiaG92ZXIiLCJzaWJsaW5ncyIsInJlbW92ZUF0dHIiLCJjaGFuZ2UiLCJteUFyciIsInNwbGl0IiwicG9wIiwiaW5wdXRmaWxlIiwiY29uc29sZSIsImxvZyIsImxhYmVsX2FkanVudGFyIiwialF1ZXJ5Il0sInNvdXJjZXMiOlsibWFpbi5qcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBR0MsRUFBUUMsRUFBUUMsR0FDNUIsYUFHQUYsRUFBT0csVUFBVUMsUUFBVSxDQUN6QkMsT0FBUSxTQUFVQyxFQUFTQyxHQUV6QkwsRUFBU00sZ0JBQWdCQyxhQUN2QixlQUNBUixFQUFPUyxVQUFVQyxXQUluQixJQUFJQyxFQUFtQixXQUNIYixFQUFFRSxHQUFRWSxTQUNULElBQ2pCZCxFQUFFLFFBQVFlLFNBQVMsYUFFbkJmLEVBQUUsUUFBUWdCLFlBQVksWUFFMUIsRUFFQUgsSUFDQWIsRUFBRUUsR0FBUWUsT0FBT0osR0FFakJiLEVBQUVHLEdBQVVlLFVBQVMsV0FDbkJMLEdBQ0YsSUFHQWIsRUFBRSxrQkFBa0JtQixZQUFZLGdDQUdoQ25CLEVBQUUsbUJBQW1Cb0IsS0FBSyxTQUFVLFVBRXBDcEIsRUFBRSxpQkFBaUJxQixHQUFHLFNBQVMsU0FBVUMsR0FDdkNBLEVBQUVDLGlCQUNGLElBQUlDLEVBQVd4QixFQUFFeUIsTUFBTUwsS0FBSyxRQUU1QnBCLEVBQUUsY0FDQzBCLE1BQUssR0FBTSxHQUNYQyxRQUNDLENBQ0VDLFVBQVc1QixFQUFFd0IsR0FBVUssU0FBU0MsS0FFbEMsSUFFTixJQUdBOUIsRUFBRSxvQkFDQ3FCLEdBQUcsUUFBUyxhQUFhLFdBQ3hCckIsRUFBRSxvQkFBb0JlLFNBQVMsYUFDL0JmLEVBQUV5QixNQUFNVixTQUFTLDBCQUNuQixJQUNDTSxHQUFHLGlCQUFrQixrQkFBa0IsZ0JBQ2hCVSxJQUFs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QSxHQUNTLE9BQVRBLEdBQ1MsT0FBVEEsRUFFQXpHLEVBQUUsb0JBQW9Cb0QsSUFBSSxVQUFXLFNBRXJDcEQsRUFBRSxvQkFBb0JvRCxJQUFJLFVBQVcsT0FFekMsSUFDQXBELEVBQUUsNEJBQTRCd0csUUFBTyxXQUNuQyxJQUFJSSxFQUFZNUcsRUFBRSw0QkFBNEI0RCxLQUM1QywwQ0FFRmdELEVBQVlBLEVBQVU1RSxNQUFNMEUsTUFBTSxNQUFNQyxNQUN4Q0MsRUFBWUEsRUFBVUYsTUFBTSxLQUFLQyxNQUNqQ0UsUUFBUUMsSUFBSUYsR0FDSyxPQUFiQSxFQUNGNUcsRUFBRSxxQkFBcUJvRCxJQUFJLFVBQVcsU0FFdENwRCxFQUFFLHFCQUFxQm9ELElBQUksVUFBVyxPQUUxQyxJQUNJcEQsRUFBRSxnQ0FBaUMsQ0FDckMsSUFBSStHLEVBQWlCL0csRUFBRXlCLE1BQU1tQyxLQUFLLFNBQVNQLE9BQzNDMEQsR0FBa0MsTUFDcEMsQ0FDRixFQUVILENBbFpELENBa1pHQyxPQUFRL0csT0FBUXdCLEtBQU1BLEtBQUt0QiIsImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQsIERydXBhbCwgd2luZG93LCBkb2N1bWVudCkge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICAvLyBFeGFtcGxlIG9mIERydXBhbCBiZWhhdmlvciBsb2FkZWQuXG4gIERydXBhbC5iZWhhdmlvcnMudGhlbWVKUyA9IHtcbiAgICBhdHRhY2g6IGZ1bmN0aW9uIChjb250ZXh0LCBzZXR0aW5ncykge1xuICAgICAgLy8gU2V0IGJyb3dzZXIgYXMgZG9jdW1lbnQgYXR0cmlidXRlXG4gICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFxuICAgICAgICBcImRhdGEtYnJvd3NlclwiLFxuICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudFxuICAgICAgKTtcblxuICAgICAgLy8gQ2hlY2sgd2luZG93IHdpZHRoIGFuZCBhZGQgY2xhc3MgdG8gYm9keSBvbiBtb2JpbGVcbiAgICAgIGxldCBjaGVja1dpbmRvd1dpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgaWYgKHdpbmRvd1dpZHRoIDw9IDk3OCkge1xuICAgICAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKFwianMtbW9iaWxlXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwianMtbW9iaWxlXCIpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBjaGVja1dpbmRvd1dpZHRoKCk7XG4gICAgICAkKHdpbmRvdykucmVzaXplKGNoZWNrV2luZG93V2lkdGgpO1xuXG4gICAgICAkKGRvY3VtZW50KS5hamF4U3RvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoZWNrV2luZG93V2lkdGgoKTtcbiAgICAgIH0pO1xuXG4gICAgICAvL0FkZHRvQW55IHNvY2lhbCBuZXR3b3Jrc1xuICAgICAgJChcIi5hZGR0b2FueV9saXN0XCIpLmluc2VydEFmdGVyKFwiLmNvbXBvbmVudF9fYmFubmVyLmNwLWJhbm5lclwiKTtcblxuICAgICAgLy8gZXh0ZXJuYWwgbGlua3Mgb3BlbiBpbiBuZXcgd2luZG93LlxuICAgICAgJChcIi5saW5rX19leHRlcm5hbFwiKS5hdHRyKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuXG4gICAgICAkKFwiLmxpbmtfX2FuY2hvclwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHN0ckFuY2xhID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTsgLy9pZCBkZWwgYW5jbGFcblxuICAgICAgICAkKFwiaHRtbCwgYm9keVwiKVxuICAgICAgICAgIC5zdG9wKHRydWUsIHRydWUpXG4gICAgICAgICAgLmFuaW1hdGUoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHNjcm9sbFRvcDogJChzdHJBbmNsYSkub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDEwMDBcbiAgICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIFNlYXJjaCBib3hcbiAgICAgICQoJyNuYXZfX3NlY3VuZGFyaW8nKVxuICAgICAgICAub24oJ2NsaWNrJywgJyNidXNjYWRvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKCcjbmF2X19zZWN1bmRhcmlvJykuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpXG4gICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYnVzY2Fkb3JfX2lucHV0LS1hY3Rpdm8nKVxuICAgICAgICB9KVxuICAgICAgICAub24oXCJibHVyLCBmb2N1c291dFwiLCBcIiNlZGl0LWtleXdvcmRzXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSA9PT0gdW5kZWZpbmVkIHx8ICQodGhpcykudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdidXNjYWRvcl9faW5wdXQtLWFjdGl2bycpXG4gICAgICAgICAgICAkKCcjbmF2X19zZWN1bmRhcmlvJylcbiAgICAgICAgICAgICAgLnNob3coMjA1KVxuICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2lzLWhpZGRlbicpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuXG4gICAgICAkKFwiI2J1c2NhZG9yX19jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIjbmF2ZWdhY2lvblwiKS5yZW1vdmVDbGFzcyhcImlzLXZpc2libGVcIik7XG4gICAgICB9KTtcblxuICAgICAgbGV0IHVybFBhcmFtID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBuZXcgUmVnRXhwKFwiWz8mXVwiICsgbmFtZSArIFwiPShbXiYjXSopXCIpLmV4ZWMoXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHJlc3VsdHMgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkZWNvZGVVUkkocmVzdWx0c1sxXSkgfHwgMDtcbiAgICAgIH07XG5cbiAgICAgIGlmIChcbiAgICAgICAgJChcIi5hbGlhcy0tem9uYS1kZS1jbGllbnRlLWNvbmRpY2lvbmFkb3MteS1kb2N1bWVudG9zXCIpLmxlbmd0aCA+IDAgfHxcbiAgICAgICAgJChcIi5hbGlhcy0tem9uYS1kZS1jbGllbnRlLXByZWd1bnRhcy1mcmVjdWVudGVzXCIpLmxlbmd0aCA+IDBcbiAgICAgICkge1xuICAgICAgICBsZXQgYnJlYWQgPSAkKFwiLmJyZWFkY3J1bWIgb2wgbGlcIikubGFzdCgpLnRleHQoKSxcbiAgICAgICAgICBmbGFnX2lzX2xhbmRpbmcgPSB0cnVlLFxuICAgICAgICAgIGNhdGVnb3JpYSA9IFwiXCIsXG4gICAgICAgICAgZnJlY3VlbnRlcyA9IFwiXCIsXG4gICAgICAgICAgYnVzY2Fkb3IgPSBcIlwiO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgJChcImJvZHlcIikuaGFzQ2xhc3MoXG4gICAgICAgICAgICBcImFsaWFzLS16b25hLWRlLWNsaWVudGUtY29uZGljaW9uYWRvcy15LWRvY3VtZW50b3NcIlxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2F0ZWdvcmlhID0gXCIuZG9jdW1lbnRvcy1wb3ItY2F0ZWdvcmlhXCI7XG4gICAgICAgICAgYnVzY2Fkb3IgPSBcIi5idXNjYWRvci1kb2N1bWVudG9zXCI7XG4gICAgICAgICAgZnJlY3VlbnRlcyA9IFwiLmRvY3VtZW50b3MtZnJlY3VlbnRlc1wiO1xuICAgICAgICAgIGlmICgkKFwiLmltZy1uby1yZXN1bHRzXCIpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICQoXCIudmlld3NyZWZlcmVuY2UtLXZpZXctdGl0bGVcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImFsaWFzLS16b25hLWRlLWNsaWVudGUtcHJlZ3VudGFzLWZyZWN1ZW50ZXNcIikpIHtcbiAgICAgICAgICBjYXRlZ29yaWEgPSBcIi5yZXN1bHRhZG9zLWNhdGVnb3JpYVwiO1xuICAgICAgICAgIGJ1c2NhZG9yID0gXCIuYnVzY2Fkb3ItbGFuZGluZ1wiO1xuICAgICAgICAgIGZyZWN1ZW50ZXMgPSBcIi5pdGVtcy1mcmVjdWVudGVzXCI7XG4gICAgICAgIH1cblxuICAgICAgICAkKFwiLmJyZWFkY3J1bWIgb2wgbGlcIilcbiAgICAgICAgICAubGFzdCgpXG4gICAgICAgICAgLmh0bWwoXG4gICAgICAgICAgICAnPGEgIGhyZWY9XCInICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgJ1wiPicgKyBicmVhZCArIFwiPC9hPlwiXG4gICAgICAgICAgKTtcblxuICAgICAgICBpZiAodXJsUGFyYW0oXCJjYXRlZ29yeVwiKSAhPT0gbnVsbCkge1xuICAgICAgICAgICQoY2F0ZWdvcmlhKS5yZW1vdmVDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICBmbGFnX2lzX2xhbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXJsUGFyYW0oXCJ0aXRsZVwiKSAhPT0gbnVsbCkge1xuICAgICAgICAgICQoYnVzY2Fkb3IpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgIGZsYWdfaXNfbGFuZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmbGFnX2lzX2xhbmRpbmcpIHtcbiAgICAgICAgICAkKFwiLmNvbXBvbmVudF9fdmlldy0tY2F0ZWdvcmlhcy1kb2N1bWVudG9zXCIpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICQoZnJlY3VlbnRlcykucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRkFRJ3Mgc2hvdyBxdWVzdGlvbiBibG9ja1xuICAgICAgJChcIi52aWV3LWRpc3BsYXktaWQtZmFxc19jYXRlZ29yaWVzX2Jsb2NrXCIpLm9uKFxuICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgIFwiLnZpZXdzLWZpZWxkLWZpZWxkLWN0YSBhXCIsXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgbGV0IGVsID0gJCh0aGlzKSxcbiAgICAgICAgICAgIHBhcmVudF9yb3cgPSBlbC5wYXJlbnRzKFwiLnZpZXdzLXJvd1wiKSxcbiAgICAgICAgICAgIHF1ZXN0aW9ucyA9IHBhcmVudF9yb3cuZmluZChcIi5wcmVndW50YXNcIiksXG4gICAgICAgICAgICBoZWlSb3cgPSBwYXJlbnRfcm93LmhlaWdodCgpO1xuXG4gICAgICAgICAgaWYgKHF1ZXN0aW9ucy5oYXNDbGFzcyhcImlzLWhpZGRlblwiKSkge1xuICAgICAgICAgICAgJChcIi5wcmVndW50YXNcIikuYWRkQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICBxdWVzdGlvbnMucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgICBsZXQgaGVpID0gcXVlc3Rpb25zLmhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKCQoXCJib2R5XCIpLmhhc0NsYXNzKFwianMtbW9iaWxlXCIpKSB7XG4gICAgICAgICAgICAgIHF1ZXN0aW9ucy5jc3MoXCJib3R0b21cIiwgaGVpICsgXCJweFwiKTtcbiAgICAgICAgICAgICAgcGFyZW50X3Jvdy5jc3MoXCJoZWlnaHRcIiwgcGFyc2VJbnQoaGVpICsgaGVpUm93ICsgMzApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcXVlc3Rpb25zLmFkZENsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgaWYgKCQoXCJib2R5XCIpLmhhc0NsYXNzKFwianMtbW9iaWxlXCIpKSB7XG4gICAgICAgICAgICAgIHBhcmVudF9yb3cuY3NzKFwiaGVpZ2h0XCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG5cbiAgICAgIGZ1bmN0aW9uIGluaXRNYXAobGF0aSwgbG5naSwgY291bnRlcikge1xuICAgICAgICBsZXQgY2VudGVyTGF0aSA9IGxhdGksXG4gICAgICAgICAgaW1hZ2UgPSB7XG4gICAgICAgICAgICB1cmw6IFwiXCIsXG4gICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSg2MCwgNjApLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbnVtQ291bnRlciA9IFwiIFwiO1xuXG4gICAgICAgIGlmIChjb3VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBudW1Db3VudGVyID0gY291bnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImFsaWFzLS1vZmljaW5hc1wiKSkge1xuICAgICAgICAgIGltYWdlLnVybCA9XG4gICAgICAgICAgICBcIi90aGVtZXMvY3VzdG9tL2xpYmVydHlfcHVibGljL2ltYWdlcy9pY29ucy9pY29uLW9maWNpbmEuc3ZnXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW1hZ2UudXJsID1cbiAgICAgICAgICAgIFwiL3RoZW1lcy9jdXN0b20vbGliZXJ0eV9wdWJsaWMvaW1hZ2VzL2ljb25zL3Bpbi1tYXAtcmVkLnN2Z1wiO1xuICAgICAgICB9XG4gICAgICAgIGNlbnRlckxhdGkgKz0gMC4wMDI7XG4gICAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImFsaWFzLS1udWVzdHJhcy1vZmljaW5hc1wiKSkge1xuICAgICAgICAgIGNlbnRlckxhdGkgKz0gMC4wMDM7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIiksIHtcbiAgICAgICAgICB6b29tOiAxNixcbiAgICAgICAgICBjZW50ZXI6IHsgbGF0OiBjZW50ZXJMYXRpLCBsbmc6IGxuZ2kgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGJlYWNoTWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgcG9zaXRpb246IHsgbGF0OiBsYXRpLCBsbmc6IGxuZ2kgfSxcbiAgICAgICAgICBvcHRpbWl6ZWQ6IGZhbHNlLFxuICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgIGljb246IGltYWdlLFxuICAgICAgICAgIGxhYmVsOiB7XG4gICAgICAgICAgICB0ZXh0OiBudW1Db3VudGVyLFxuICAgICAgICAgICAgY29sb3I6IFwiI2ZmZmZmZlwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAkKFwiLnZlck1hcGFcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBlbCA9ICQodGhpcyksXG4gICAgICAgICAgbGF0aSA9IGVsLmF0dHIoXCJsYXRcIiksXG4gICAgICAgICAgbG9uZ2kgPSBlbC5hdHRyKFwibG5nXCIpLFxuICAgICAgICAgIGRpcmVjID0gZWwuYXR0cihcImRpclwiKSxcbiAgICAgICAgICB0aXRsZSA9IGVsLmF0dHIoXCJ0aXRsZVwiKSxcbiAgICAgICAgICBjb3VudGVyID0gZWwuYXR0cihcImNvdW50ZXJcIiksXG4gICAgICAgICAgdGVsID0gZWwuYXR0cihcInRlbGVwaG9uZVwiKSxcbiAgICAgICAgICBzY2hlZHVsZSA9IGVsLmNoaWxkcmVuKFwiaVwiKS5odG1sKCk7XG5cbiAgICAgICAgJChcIi53cmFwcGVyX19tYXBcIikucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgIGluaXRNYXAocGFyc2VGbG9hdChsYXRpKSwgcGFyc2VGbG9hdChsb25naSksIGNvdW50ZXIpO1xuICAgICAgICBpZiAoZWwuaGFzQ2xhc3MoXCJtYXBhU3VjdXJzYWxcIikpIHtcbiAgICAgICAgICAkKFwiI2luZm9tYXBcIikuaHRtbChcbiAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nY29udGVudF9faW5mb21hcCc+XCIgK1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRvb2x0aXBcIj48c3BhbiBjbGFzcz1cInRvb2x0aXB0ZXh0XCI+JyArXG4gICAgICAgICAgICAgIGNvdW50ZXIgK1xuICAgICAgICAgICAgICBcIjwvc3Bhbj48L2Rpdj5cIiArXG4gICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNsb3NlXCI+PC9zcGFuPjxoMj4nICtcbiAgICAgICAgICAgICAgdGl0bGUgK1xuICAgICAgICAgICAgICBcIjwvaDI+XCIgK1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluZm9cIj5cXG4nICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbmZvLXJpZ2h0XCI+XFxuJyArXG4gICAgICAgICAgICAgICcgIDxwIGNsYXNzPVwicmVkX19kaXJlY2Npb25cIj48c3Bhbj4nICtcbiAgICAgICAgICAgICAgZGlyZWMgK1xuICAgICAgICAgICAgICBcIjwvc3Bhbj48L3A+XFxuXCIgK1xuICAgICAgICAgICAgICAnICA8cCBjbGFzcz1cInJlZF9fdGVsZWZvbm9zXCI+PHNwYW4gY2xhc3M9XCJuYW1lLWVsZW1lbnQtb2ZmaWNlXCI+VGVsXFx4RTlmb25vczwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgdGVsICtcbiAgICAgICAgICAgICAgXCI8L3A+XFxuXCIgK1xuICAgICAgICAgICAgICAnICA8cCBjbGFzcz1cImhvcmFyaW9zXCI+IFxcbicgK1xuICAgICAgICAgICAgICAnPHNwYW4gc3R5bGU9XCJcXG4nICtcbiAgICAgICAgICAgICAgXCIgICAgZGlzcGxheTogYmxvY2s7XFxuXCIgK1xuICAgICAgICAgICAgICAnXCI+SG9yYXJpbyBkZSBhdGVuY2lcXHhGM248L3NwYW4+XFxuJyArXG4gICAgICAgICAgICAgIFwiXCIgK1xuICAgICAgICAgICAgICBzY2hlZHVsZSArXG4gICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICBcIjwvcD5cXG5cIiArXG4gICAgICAgICAgICAgIFwiPC9kaXY+XFxuXCIgK1xuICAgICAgICAgICAgICBcIjwvZGl2PlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZWwuaGFzQ2xhc3MoXCJwYXltZW50X3BvaW50c1wiKSkge1xuICAgICAgICAgICAgJChcIiNpbmZvbWFwXCIpLmh0bWwoXG4gICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nY29udGVudF9faW5mb21hcCc+XCIgK1xuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNsb3NlXCI+PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgIFwiPGgyPlwiICtcbiAgICAgICAgICAgICAgICB0aXRsZSArXG4gICAgICAgICAgICAgICAgXCI8L2gyPlwiICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluZm9cIj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJlZF9fZGlyZWNjaW9uXCI+JyArXG4gICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwiaW5mby1yaWdodFwiPicgK1xuICAgICAgICAgICAgICAgIGRpcmVjICtcbiAgICAgICAgICAgICAgICBcIjwvcD5cIiArXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIiArXG4gICAgICAgICAgICAgICAgJzxwIGNsYXNzPVwicmVkX190ZWxlZm9ub3NcIj4nICtcbiAgICAgICAgICAgICAgICB0ZWwgK1xuICAgICAgICAgICAgICAgIFwiPC9wPlwiICtcbiAgICAgICAgICAgICAgICBcIjwvZGl2PjwvZGl2PjwvZGl2PlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKFwiI2luZm9tYXBcIikuaHRtbChcbiAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdjb250ZW50X19pbmZvbWFwJz5cIiArXG4gICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2xvc2VcIj48L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgXCI8aDI+XCIgK1xuICAgICAgICAgICAgICAgIHRpdGxlICtcbiAgICAgICAgICAgICAgICBcIjwvaDI+XCIgK1xuICAgICAgICAgICAgICAgIFwiPHA+XCIgK1xuICAgICAgICAgICAgICAgIGRpcmVjICtcbiAgICAgICAgICAgICAgICBcIjwvcD5cIiArXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLnZlckluZm9cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgZWwgPSAkKHRoaXMpO1xuICAgICAgICBpZiAoZWwucGFyZW50KCkuaGFzQ2xhc3MoXCJ2aWV3cy1yb3dcIikpIHtcbiAgICAgICAgICBsZXQgd3JhcHBlciA9IGVsLnBhcmVudCgpO1xuICAgICAgICAgIHdyYXBwZXIuZmluZChcIi5wb3B1cC1pbmZvXCIpLmFkZENsYXNzKFwiaXMtZml4ZWQtZ2xvYmFsXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCB3cmFwcGVyID0gZWwucGFyZW50KCkucGFyZW50KCk7XG4gICAgICAgICAgd3JhcHBlci5hZGRDbGFzcyhcImlzLWZpeGVkLWdsb2JhbFwiKTtcbiAgICAgICAgfVxuICAgICAgICB3cmFwcGVyLmZpbmQoXCIuaW5mbyBwXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGxldCBlbCA9ICQodGhpcyk7XG4gICAgICAgICAgaWYgKGVsLmhhc0NsYXNzKFwiaXMtZGVza3RvcFwiKSkge1xuICAgICAgICAgICAgZWwucmVtb3ZlQ2xhc3MoXCJpcy1kZXNrdG9wXCIpO1xuICAgICAgICAgICAgZWwuYWRkQ2xhc3MoXCJpcy1tb2JpbGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLmFycm93QmFja1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBlbCA9ICQodGhpcyk7XG4gICAgICAgIGlmIChlbC5wYXJlbnQoKS5oYXNDbGFzcyhcInBvcHVwLWluZm9cIikpIHtcbiAgICAgICAgICBsZXQgd3JhcHBlciA9IGVsLnBhcmVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgd3JhcHBlclxuICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImlzLWZpeGVkLWdsb2JhbFwiKVxuICAgICAgICAgIC5maW5kKFwiLmluZm8gcFwiKVxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBlbCA9ICQodGhpcyk7XG4gICAgICAgICAgICBpZiAoZWwuaGFzQ2xhc3MoXCJpcy1tb2JpbGVcIikpIHtcbiAgICAgICAgICAgICAgZWwucmVtb3ZlQ2xhc3MoXCJpcy1tb2JpbGVcIik7XG4gICAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiaXMtZGVza3RvcFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLmluZm8gLmhlYWRlcl9faW5mbyAjY2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgfSk7XG5cbiAgICAgICQoXCIud3JhcHBlcl9fbWFwXCIpLm9uKFwiY2xpY2tcIiwgXCIuY2xvc2UsICNjbG9zZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIud3JhcHBlcl9fbWFwXCIpLmFkZENsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgfSk7XG4gICAgICAkKFwiLm9wdGlvbnMtYWNjb3JkaW9uIC5vcHRpb24gLnZpZXdzLWZpZWxkLW5vdGhpbmdcIikuaG92ZXIoXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAuc2libGluZ3MoXG4gICAgICAgICAgICAgIFwiLm9wdGlvbnMtYWNjb3JkaW9uIC5vcHRpb24gLnZpZXdzLWZpZWxkLWRlc2NyaXB0aW9uX192YWx1ZVwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJvcGVuXCIpO1xuICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgIC5wYXJlbnQoXCIub3B0aW9uXCIpXG4gICAgICAgICAgICAucGFyZW50KFwiLm9wdGlvbnMtYWNjb3JkaW9uXCIpXG4gICAgICAgICAgICAuY3NzKFwib3ZlcmZsb3dcIiwgXCJpbml0aWFsXCIpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJChcbiAgICAgICAgICAgIFwiLm9wdGlvbnMtYWNjb3JkaW9uIC5vcHRpb24gLnZpZXdzLWZpZWxkLWRlc2NyaXB0aW9uX192YWx1ZVwiXG4gICAgICAgICAgKS5yZW1vdmVDbGFzcyhcIm9wZW5cIik7XG4gICAgICAgICAgJChcIi5qcy1hY2NvcmRpb24tb3B0aW9uc1wiKS5jc3MoXCJvdmVyZmxvd1wiLCBcImhpZGRlblwiKTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIC8vQWp1c3Rlc1xuXG4gICAgICBmdW5jdGlvbiBjbGlja1NlY3Rpb24oYnV0dG9uKSB7XG4gICAgICAgICQoXCIuY29tcG9uZW50X19mb3JtLS1yZWQtbWVkaWNhIC5jb21wb25lbnRfX2NvbnRlbnRcIikucmVtb3ZlQXR0cihcbiAgICAgICAgICBcImhyZWZcIlxuICAgICAgICApO1xuICAgICAgICAkKGJ1dHRvbikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2lwJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyAkKGJ1dHRvbikub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgLy8gICAgIGxldCB0YXJnZXQgPSAkKHRoaXMuZ2V0QXR0cmlidXRlKCdocmVmJykpO1xuICAgICAgICAvLyAgICAgaWYgKHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICAgLy8gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyAgICAgICAgICQoJy5jb21wb25lbnRfX2Zvcm0tLXJlZC1tZWRpY2EgLmNvbXBvbmVudF9fY29udGVudCcpLnN0b3AoKS5hbmltYXRlKHtcbiAgICAgICAgLy8gICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wXG4gICAgICAgIC8vICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0pO1xuICAgICAgfVxuICAgICAgY2xpY2tTZWN0aW9uKFwiLmNvbXBvbmVudF9fZm9ybS0tcmVkLW1lZGljYSAuY29tcG9uZW50X19jb250ZW50XCIpO1xuXG4gICAgICAvLyB3b3Jrc2hvcHMgZmlsdGVyXG4gICAgICAkKFxuICAgICAgICBcIi5hbGlhcy0tc2luaWVzdHJvcy10YWxsZXJlcy1wcmVmZXJlbmNpYWxlcyAudmlldy10YWxsZXJlcyAuZm9ybS1zZWxlY3RcIlxuICAgICAgKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXG4gICAgICAgICAgXCIuYWxpYXMtLXNpbmllc3Ryb3MtdGFsbGVyZXMtcHJlZmVyZW5jaWFsZXMgLnZpZXctdGFsbGVyZXMgLmpzLWZvcm0tc3VibWl0XCJcbiAgICAgICAgKS5jbGljaygpO1xuICAgICAgfSk7XG5cbiAgICAgICQoXCIudGV4dF9maWxlX2Vycm9yX2lucHV0XCIpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBmaWxlbmFtZSA9ICQoXCJpbnB1dFt0eXBlPWZpbGVdXCIpLnZhbCgpLnNwbGl0KFwiXFxcXFwiKS5wb3AoKTtcbiAgICAgICAgY29uc3QgbXlBcnIgPSBmaWxlbmFtZS5zcGxpdChcIi5cIikucG9wKCk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG15QXJyICE9IFwicGRmXCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcImdpZlwiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJqcGdcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwicG5nXCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcInR4dFwiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJkb2NcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwiZG9jeFwiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJwcHRcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwicHB0eFwiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJ4bHNcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwieGxzXCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcInppcFwiXG4gICAgICAgICkge1xuICAgICAgICAgICQoXCIudGV4dF9maWxlX2Vycm9yXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKFwiLnRleHRfZmlsZV9lcnJvclwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAkKFwiLnRleHRfZmlsZV9lcnJvcl9pbnB1dF8yXCIpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpbnB1dGZpbGUgPSAkKFwiLnRleHRfZmlsZV9lcnJvcl9pbnB1dF8yXCIpLmZpbmQoXG4gICAgICAgICAgJ2lucHV0W25hbWU9XCJmaWxlc1thZGp1bnRhcl9hcmNoaXZvc11cIl0nXG4gICAgICAgICk7XG4gICAgICAgIGlucHV0ZmlsZSA9IGlucHV0ZmlsZS52YWwoKS5zcGxpdChcIlxcXFxcIikucG9wKCk7XG4gICAgICAgIGlucHV0ZmlsZSA9IGlucHV0ZmlsZS5zcGxpdChcIi5cIikucG9wKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0ZmlsZSk7XG4gICAgICAgIGlmIChpbnB1dGZpbGUgIT0gXCJwZGZcIikge1xuICAgICAgICAgICQoXCIudGV4dF9maWxlX2Vycm9yMlwiKS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChcIi50ZXh0X2ZpbGVfZXJyb3IyXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICgkKFwiLmZvcm0taXRlbS1hZGp1bnRhci1hcmNoaXZvc1wiKSkge1xuICAgICAgICBsZXQgbGFiZWxfYWRqdW50YXIgPSAkKHRoaXMpLmZpbmQoXCJsYWJlbFwiKS5odG1sKCk7XG4gICAgICAgIGxhYmVsX2FkanVudGFyID0gbGFiZWxfYWRqdW50YXIgKyBcIjxicj5cIjtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufSkoalF1ZXJ5LCBEcnVwYWwsIHRoaXMsIHRoaXMuZG9jdW1lbnQpO1xuIl19
