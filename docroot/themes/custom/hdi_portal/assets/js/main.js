!function(e,s,i,o){"use strict";s.behaviors.themeJS={attach:function(s,a){o.documentElement.setAttribute("data-browser",i.navigator.userAgent);let t=function(){e(i).width()<=978?e("body").addClass("js-mobile"):e("body").removeClass("js-mobile")};t(),e(i).resize(t),e(o).ajaxStop((function(){t()})),e(".addtoany_list").insertAfter(".component__banner.cp-banner"),e(".link__external").attr("target","_blank"),e(".link__anchor").on("click",(function(s){s.preventDefault();let i=e(this).attr("href");e("html, body").stop(!0,!0).animate({scrollTop:e(i).offset().top},1e3)}));const n=e("#nav__secundario"),l=e("#buscador"),r=l.find(".form-autocomplete.form-text");n.on("click",l,(()=>{e("#block-hdi-portal-transversales").addClass("is-hidden"),l.addClass("buscador__input--activo")})).on("blur, focusout",r,(()=>{void 0!==r.val()&&""!==r.val()||(e("#block-hdi-portal-transversales").removeClass("is-hidden"),l.removeClass("buscador__input--activo"))}));let c=function(e){let s=new RegExp("[?&]"+e+"=([^&#]*)").exec(i.location.href);return null==s?null:decodeURI(s[1])||0};if(e(".alias--zona-de-cliente-condicionados-y-documentos").length>0||e(".alias--zona-de-cliente-preguntas-frecuentes").length>0){let s=e(".breadcrumb ol li").last().text(),o=!0,a="",t="",n="";e("body").hasClass("alias--zona-de-cliente-condicionados-y-documentos")&&(a=".documentos-por-categoria",n=".buscador-documentos",t=".documentos-frecuentes",e(".img-no-results").length>1&&e(".viewsreference--view-title").css("display","none")),e("body").hasClass("alias--zona-de-cliente-preguntas-frecuentes")&&(a=".resultados-categoria",n=".buscador-landing",t=".items-frecuentes"),e(".breadcrumb ol li").last().html('<a  href="'+i.location.pathname+'">'+s+"</a>"),null!==c("category")&&(e(a).removeClass("is-hidden"),o=!1),null!==c("title")&&(e(n).removeClass("is-hidden"),o=!1),o&&(e(".component__view--categorias-documentos").removeClass("is-hidden"),e(t).removeClass("is-hidden"))}var d;if(e(".view-display-id-faqs_categories_block").on("click",".views-field-field-cta a",(function(s){s.preventDefault();let i=e(this).parents(".views-row"),o=i.find(".preguntas"),a=i.height();if(o.hasClass("is-hidden")){e(".preguntas").addClass("is-hidden"),o.removeClass("is-hidden");let s=o.height();e("body").hasClass("js-mobile")&&(o.css("bottom",s+"px"),i.css("height",parseInt(s+a+30)))}else o.addClass("is-hidden"),e("body").hasClass("js-mobile")&&i.css("height","auto")})),e(".verMapa").on("click",(function(){let s=e(this),i=s.attr("lat"),a=s.attr("lng"),t=s.attr("dir"),n=s.attr("title"),l=s.attr("counter"),r=s.attr("telephone"),c=s.children("i").html();e(".wrapper__map").removeClass("is-hidden"),function(s,i,a){let t=s,n={url:"",scaledSize:new google.maps.Size(60,60)},l=" ";void 0!==a&&(l=a),e("body").hasClass("alias--oficinas")?n.url="/themes/custom/liberty_public/images/icons/icon-oficina.svg":n.url="/themes/custom/liberty_public/images/icons/pin-map-red.svg",t+=.002,e("body").hasClass("alias--nuestras-oficinas")&&(t+=.003);let r=new google.maps.Map(o.getElementById("map"),{zoom:16,center:{lat:t,lng:i}});new google.maps.Marker({position:{lat:s,lng:i},optimized:!1,map:r,icon:n,label:{text:l,color:"#ffffff"}})}(parseFloat(i),parseFloat(a),l),s.hasClass("mapaSucursal")?e("#infomap").html('<div class=\'content__infomap\'><div class="tooltip"><span class="tooltiptext">'+l+'</span></div><span class="close"></span><h2>'+n+'</h2><div class="info">\n<div class="info-right">\n  <p class="red__direccion"><span>'+t+'</span></p>\n  <p class="red__telefonos"><span class="name-element-office">Teléfonos</span>'+r+'</p>\n  <p class="horarios"> \n<span style="\n    display: block;\n">Horario de atención</span>\n'+c+"\n</p>\n</div>\n</div>"):s.hasClass("payment_points")?e("#infomap").html("<div class='content__infomap'><span class=\"close\"></span><h2>"+n+'</h2><div class="info"><div class="red__direccion"><p class="info-right">'+t+'</p></div><p class="red__telefonos">'+r+"</p></div></div></div>"):e("#infomap").html("<div class='content__infomap'><span class=\"close\"></span><h2>"+n+"</h2><p>"+t+"</p></div>")})),e(".verInfo").click((function(){let s=e(this);if(s.parent().hasClass("views-row")){s.parent().find(".popup-info").addClass("is-fixed-global")}else{s.parent().parent().addClass("is-fixed-global")}wrapper.find(".info p").each((function(){let s=e(this);s.hasClass("is-desktop")&&(s.removeClass("is-desktop"),s.addClass("is-mobile"))}))})),e(".arrowBack").click((function(){let s=e(this);if(s.parent().hasClass("popup-info")){s.parent()}wrapper.removeClass("is-fixed-global").find(".info p").each((function(){let s=e(this);s.hasClass("is-mobile")&&(s.removeClass("is-mobile"),s.addClass("is-desktop"))}))})),e(".info .header__info #close").click((function(){e(this).parent().parent().removeClass("is-active")})),e(".wrapper__map").on("click",".close, #close",(function(){e(".wrapper__map").addClass("is-hidden")})),e(".options-accordion .option .views-field-nothing").hover((function(){e(this).siblings(".options-accordion .option .views-field-description__value").addClass("open"),e(this).parent(".option").parent(".options-accordion").css("overflow","initial")}),(function(){e(".options-accordion .option .views-field-description__value").removeClass("open"),e(".js-accordion-options").css("overflow","hidden")})),d=".component__form--red-medica .component__content",e(".component__form--red-medica .component__content").removeAttr("href"),e(d).on("click",(function(e){})),e(".alias--siniestros-talleres-preferenciales .view-talleres .form-select").on("change",(function(){e(".alias--siniestros-talleres-preferenciales .view-talleres .js-form-submit").click()})),e(".text_file_error_input").change((function(){const s=e("input[type=file]").val().split("\\").pop().split(".").pop();"pdf"!=s&&"gif"!=s&&"jpg"!=s&&"png"!=s&&"txt"!=s&&"doc"!=s&&"docx"!=s&&"ppt"!=s&&"pptx"!=s&&"xls"!=s&&"xls"!=s&&"zip"!=s?e(".text_file_error").css("display","block"):e(".text_file_error").css("display","none")})),e(".text_file_error_input_2").change((function(){let s=e(".text_file_error_input_2").find('input[name="files[adjuntar_archivos]"]');s=s.val().split("\\").pop(),s=s.split(".").pop(),console.log(s),"pdf"!=s?e(".text_file_error2").css("display","block"):e(".text_file_error2").css("display","none")})),e(".form-item-adjuntar-archivos")){let s=e(this).find("label").html();s+="<br>"}}}}(jQuery,Drupal,this,this.document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm5hbWVzIjpbIiQiLCJEcnVwYWwiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImJlaGF2aW9ycyIsInRoZW1lSlMiLCJhdHRhY2giLCJjb250ZXh0Iiwic2V0dGluZ3MiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJjaGVja1dpbmRvd1dpZHRoIiwid2lkdGgiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicmVzaXplIiwiYWpheFN0b3AiLCJpbnNlcnRBZnRlciIsImF0dHIiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0ckFuY2xhIiwidGhpcyIsInN0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwibmF2U2VjdW5kYXJpbyIsImJ1c2NhZG9yR2xvYmFsIiwiYnVzY2FyZG9yVGV4dCIsImZpbmQiLCJ1bmRlZmluZWQiLCJ2YWwiLCJ1cmxQYXJhbSIsIm5hbWUiLCJyZXN1bHRzIiwiUmVnRXhwIiwiZXhlYyIsImxvY2F0aW9uIiwiaHJlZiIsImRlY29kZVVSSSIsImxlbmd0aCIsImJyZWFkIiwibGFzdCIsInRleHQiLCJmbGFnX2lzX2xhbmRpbmciLCJjYXRlZ29yaWEiLCJmcmVjdWVudGVzIiwiYnVzY2Fkb3IiLCJoYXNDbGFzcyIsImNzcyIsImh0bWwiLCJwYXRobmFtZSIsImJ1dHRvbiIsImV2ZW50IiwicGFyZW50X3JvdyIsInBhcmVudHMiLCJxdWVzdGlvbnMiLCJoZWlSb3ciLCJoZWlnaHQiLCJoZWkiLCJwYXJzZUludCIsImVsIiwibGF0aSIsImxvbmdpIiwiZGlyZWMiLCJ0aXRsZSIsImNvdW50ZXIiLCJ0ZWwiLCJzY2hlZHVsZSIsImNoaWxkcmVuIiwibG5naSIsImNlbnRlckxhdGkiLCJpbWFnZSIsInVybCIsInNjYWxlZFNpemUiLCJnb29nbGUiLCJtYXBzIiwiU2l6ZSIsIm51bUNvdW50ZXIiLCJtYXAiLCJNYXAiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJNYXJrZXIiLCJwb3NpdGlvbiIsIm9wdGltaXplZCIsImljb24iLCJsYWJlbCIsImNvbG9yIiwiaW5pdE1hcCIsInBhcnNlRmxvYXQiLCJjbGljayIsInBhcmVudCIsIndyYXBwZXIiLCJlYWNoIiwiaG92ZXIiLCJzaWJsaW5ncyIsInJlbW92ZUF0dHIiLCJjaGFuZ2UiLCJteUFyciIsInNwbGl0IiwicG9wIiwiaW5wdXRmaWxlIiwiY29uc29sZSIsImxvZyIsImxhYmVsX2FkanVudGFyIiwialF1ZXJ5Il0sInNvdXJjZXMiOlsibWFpbi5qcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBR0MsRUFBUUMsRUFBUUMsR0FDNUIsYUFHQUYsRUFBT0csVUFBVUMsUUFBVSxDQUN6QkMsT0FBUSxTQUFVQyxFQUFTQyxHQUV6QkwsRUFBU00sZ0JBQWdCQyxhQUN2QixlQUNBUixFQUFPUyxVQUFVQyxXQUluQixJQUFJQyxFQUFtQixXQUNIYixFQUFFRSxHQUFRWSxTQUNULElBQ2pCZCxFQUFFLFFBQVFlLFNBQVMsYUFFbkJmLEVBQUUsUUFBUWdCLFlBQVksWUFFMUIsRUFFQUgsSUFDQWIsRUFBRUUsR0FBUWUsT0FBT0osR0FFakJiLEVBQUVHLEdBQVVlLFVBQVMsV0FDbkJMLEdBQ0YsSUFHQWIsRUFBRSxrQkFBa0JtQixZQUFZLGdDQUdoQ25CLEVBQUUsbUJBQW1Cb0IsS0FBSyxTQUFVLFVBRXBDcEIsRUFBRSxpQkFBaUJxQixHQUFHLFNBQVMsU0FBVUMsR0FDdkNBLEVBQUVDLGlCQUNGLElBQUlDLEVBQVd4QixFQUFFeUIsTUFBTUwsS0FBSyxRQUU1QnBCLEVBQUUsY0FDQzBCLE1BQUssR0FBTSxHQUNYQyxRQUNDLENBQ0VDLFVBQVc1QixFQUFFd0IsR0FBVUssU0FBU0MsS0FFbEMsSUFFTixJQUdBLE1BQU1DLEVBQWdCL0IsRUFBRSxvQkFDbEJnQyxFQUFpQmhDLEVBQUUsYUFDbkJpQyxFQUFnQkQsRUFBZUUsS0FBSyxnQ0FFMUNILEVBQ0dWLEdB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QVRBLEdBQ1MsT0FBVEEsR0FDUyxPQUFUQSxHQUNTLE9BQVRBLEVBRUEzRyxFQUFFLG9CQUFvQnNELElBQUksVUFBVyxTQUVyQ3RELEVBQUUsb0JBQW9Cc0QsSUFBSSxVQUFXLE9BRXpDLElBQ0F0RCxFQUFFLDRCQUE0QjBHLFFBQU8sV0FDbkMsSUFBSUksRUFBWTlHLEVBQUUsNEJBQTRCa0MsS0FDNUMsMENBRUY0RSxFQUFZQSxFQUFVMUUsTUFBTXdFLE1BQU0sTUFBTUMsTUFDeENDLEVBQVlBLEVBQVVGLE1BQU0sS0FBS0MsTUFDakNFLFFBQVFDLElBQUlGLEdBQ0ssT0FBYkEsRUFDRjlHLEVBQUUscUJBQXFCc0QsSUFBSSxVQUFXLFNBRXRDdEQsRUFBRSxxQkFBcUJzRCxJQUFJLFVBQVcsT0FFMUMsSUFDSXRELEVBQUUsZ0NBQWlDLENBQ3JDLElBQUlpSCxFQUFpQmpILEVBQUV5QixNQUFNUyxLQUFLLFNBQVNxQixPQUMzQzBELEdBQWtDLE1BQ3BDLENBQ0YsRUFFSCxDQWhaRCxDQWdaR0MsT0FBUWpILE9BQVF3QixLQUFNQSxLQUFLdEIiLCJpZ25vcmVMaXN0IjpbXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkLCBEcnVwYWwsIHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gRXhhbXBsZSBvZiBEcnVwYWwgYmVoYXZpb3IgbG9hZGVkLlxuICBEcnVwYWwuYmVoYXZpb3JzLnRoZW1lSlMgPSB7XG4gICAgYXR0YWNoOiBmdW5jdGlvbiAoY29udGV4dCwgc2V0dGluZ3MpIHtcbiAgICAgIC8vIFNldCBicm93c2VyIGFzIGRvY3VtZW50IGF0dHJpYnV0ZVxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJkYXRhLWJyb3dzZXJcIixcbiAgICAgICAgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAgICk7XG5cbiAgICAgIC8vIENoZWNrIHdpbmRvdyB3aWR0aCBhbmQgYWRkIGNsYXNzIHRvIGJvZHkgb24gbW9iaWxlXG4gICAgICBsZXQgY2hlY2tXaW5kb3dXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgIGlmICh3aW5kb3dXaWR0aCA8PSA5NzgpIHtcbiAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcImpzLW1vYmlsZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcImpzLW1vYmlsZVwiKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgY2hlY2tXaW5kb3dXaWR0aCgpO1xuICAgICAgJCh3aW5kb3cpLnJlc2l6ZShjaGVja1dpbmRvd1dpZHRoKTtcblxuICAgICAgJChkb2N1bWVudCkuYWpheFN0b3AoZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja1dpbmRvd1dpZHRoKCk7XG4gICAgICB9KTtcblxuICAgICAgLy9BZGR0b0FueSBzb2NpYWwgbmV0d29ya3NcbiAgICAgICQoXCIuYWRkdG9hbnlfbGlzdFwiKS5pbnNlcnRBZnRlcihcIi5jb21wb25lbnRfX2Jhbm5lci5jcC1iYW5uZXJcIik7XG5cbiAgICAgIC8vIGV4dGVybmFsIGxpbmtzIG9wZW4gaW4gbmV3IHdpbmRvdy5cbiAgICAgICQoXCIubGlua19fZXh0ZXJuYWxcIikuYXR0cihcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcblxuICAgICAgJChcIi5saW5rX19hbmNob3JcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxldCBzdHJBbmNsYSA9ICQodGhpcykuYXR0cihcImhyZWZcIik7IC8vaWQgZGVsIGFuY2xhXG5cbiAgICAgICAgJChcImh0bWwsIGJvZHlcIilcbiAgICAgICAgICAuc3RvcCh0cnVlLCB0cnVlKVxuICAgICAgICAgIC5hbmltYXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoc3RyQW5jbGEpLm9mZnNldCgpLnRvcCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDAwXG4gICAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWFyY2ggYm94XG4gICAgICBjb25zdCBuYXZTZWN1bmRhcmlvID0gJCgnI25hdl9fc2VjdW5kYXJpbycpXG4gICAgICBjb25zdCBidXNjYWRvckdsb2JhbCA9ICQoJyNidXNjYWRvcicpXG4gICAgICBjb25zdCBidXNjYXJkb3JUZXh0ID0gYnVzY2Fkb3JHbG9iYWwuZmluZCgnLmZvcm0tYXV0b2NvbXBsZXRlLmZvcm0tdGV4dCcpXG5cbiAgICAgIG5hdlNlY3VuZGFyaW9cbiAgICAgICAgLm9uKCdjbGljaycsIGJ1c2NhZG9yR2xvYmFsLCAoKSA9PiB7XG4gICAgICAgICAgJCgnI2Jsb2NrLWhkaS1wb3J0YWwtdHJhbnN2ZXJzYWxlcycpLmFkZENsYXNzKCdpcy1oaWRkZW4nKVxuICAgICAgICAgIGJ1c2NhZG9yR2xvYmFsLmFkZENsYXNzKCdidXNjYWRvcl9faW5wdXQtLWFjdGl2bycpXG4gICAgICAgIH0pXG4gICAgICAgIC5vbignYmx1ciwgZm9jdXNvdXQnLCBidXNjYXJkb3JUZXh0LCAoKSA9PiB7XG4gICAgICAgICAgaWYgKGJ1c2NhcmRvclRleHQudmFsKCkgPT09IHVuZGVmaW5lZCB8fCBidXNjYXJkb3JUZXh0LnZhbCgpID09PSAnJykge1xuICAgICAgICAgICAgJCgnI2Jsb2NrLWhkaS1wb3J0YWwtdHJhbnN2ZXJzYWxlcycpLnJlbW92ZUNsYXNzKCdpcy1oaWRkZW4nKVxuICAgICAgICAgICAgYnVzY2Fkb3JHbG9iYWwucmVtb3ZlQ2xhc3MoJ2J1c2NhZG9yX19pbnB1dC0tYWN0aXZvJylcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICAgIGxldCB1cmxQYXJhbSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGxldCByZXN1bHRzID0gbmV3IFJlZ0V4cChcIls/Jl1cIiArIG5hbWUgKyBcIj0oW14mI10qKVwiKS5leGVjKFxuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmXG4gICAgICAgICk7XG4gICAgICAgIGlmIChyZXN1bHRzID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJKHJlc3VsdHNbMV0pIHx8IDA7XG4gICAgICB9O1xuXG4gICAgICBpZiAoXG4gICAgICAgICQoXCIuYWxpYXMtLXpvbmEtZGUtY2xpZW50ZS1jb25kaWNpb25hZG9zLXktZG9jdW1lbnRvc1wiKS5sZW5ndGggPiAwIHx8XG4gICAgICAgICQoXCIuYWxpYXMtLXpvbmEtZGUtY2xpZW50ZS1wcmVndW50YXMtZnJlY3VlbnRlc1wiKS5sZW5ndGggPiAwXG4gICAgICApIHtcbiAgICAgICAgbGV0IGJyZWFkID0gJChcIi5icmVhZGNydW1iIG9sIGxpXCIpLmxhc3QoKS50ZXh0KCksXG4gICAgICAgICAgZmxhZ19pc19sYW5kaW5nID0gdHJ1ZSxcbiAgICAgICAgICBjYXRlZ29yaWEgPSBcIlwiLFxuICAgICAgICAgIGZyZWN1ZW50ZXMgPSBcIlwiLFxuICAgICAgICAgIGJ1c2NhZG9yID0gXCJcIjtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICQoXCJib2R5XCIpLmhhc0NsYXNzKFxuICAgICAgICAgICAgXCJhbGlhcy0tem9uYS1kZS1jbGllbnRlLWNvbmRpY2lvbmFkb3MteS1kb2N1bWVudG9zXCJcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIGNhdGVnb3JpYSA9IFwiLmRvY3VtZW50b3MtcG9yLWNhdGVnb3JpYVwiO1xuICAgICAgICAgIGJ1c2NhZG9yID0gXCIuYnVzY2Fkb3ItZG9jdW1lbnRvc1wiO1xuICAgICAgICAgIGZyZWN1ZW50ZXMgPSBcIi5kb2N1bWVudG9zLWZyZWN1ZW50ZXNcIjtcbiAgICAgICAgICBpZiAoJChcIi5pbWctbm8tcmVzdWx0c1wiKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAkKFwiLnZpZXdzcmVmZXJlbmNlLS12aWV3LXRpdGxlXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJhbGlhcy0tem9uYS1kZS1jbGllbnRlLXByZWd1bnRhcy1mcmVjdWVudGVzXCIpKSB7XG4gICAgICAgICAgY2F0ZWdvcmlhID0gXCIucmVzdWx0YWRvcy1jYXRlZ29yaWFcIjtcbiAgICAgICAgICBidXNjYWRvciA9IFwiLmJ1c2NhZG9yLWxhbmRpbmdcIjtcbiAgICAgICAgICBmcmVjdWVudGVzID0gXCIuaXRlbXMtZnJlY3VlbnRlc1wiO1xuICAgICAgICB9XG5cbiAgICAgICAgJChcIi5icmVhZGNydW1iIG9sIGxpXCIpXG4gICAgICAgICAgLmxhc3QoKVxuICAgICAgICAgIC5odG1sKFxuICAgICAgICAgICAgJzxhICBocmVmPVwiJyArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArICdcIj4nICsgYnJlYWQgKyBcIjwvYT5cIlxuICAgICAgICAgICk7XG5cbiAgICAgICAgaWYgKHVybFBhcmFtKFwiY2F0ZWdvcnlcIikgIT09IG51bGwpIHtcbiAgICAgICAgICAkKGNhdGVnb3JpYSkucmVtb3ZlQ2xhc3MoXCJpcy1oaWRkZW5cIik7XG4gICAgICAgICAgZmxhZ19pc19sYW5kaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVybFBhcmFtKFwidGl0bGVcIikgIT09IG51bGwpIHtcbiAgICAgICAgICAkKGJ1c2NhZG9yKS5yZW1vdmVDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICBmbGFnX2lzX2xhbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmxhZ19pc19sYW5kaW5nKSB7XG4gICAgICAgICAgJChcIi5jb21wb25lbnRfX3ZpZXctLWNhdGVnb3JpYXMtZG9jdW1lbnRvc1wiKS5yZW1vdmVDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAkKGZyZWN1ZW50ZXMpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZBUSdzIHNob3cgcXVlc3Rpb24gYmxvY2tcbiAgICAgICQoXCIudmlldy1kaXNwbGF5LWlkLWZhcXNfY2F0ZWdvcmllc19ibG9ja1wiKS5vbihcbiAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICBcIi52aWV3cy1maWVsZC1maWVsZC1jdGEgYVwiLFxuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGxldCBlbCA9ICQodGhpcyksXG4gICAgICAgICAgICBwYXJlbnRfcm93ID0gZWwucGFyZW50cyhcIi52aWV3cy1yb3dcIiksXG4gICAgICAgICAgICBxdWVzdGlvbnMgPSBwYXJlbnRfcm93LmZpbmQoXCIucHJlZ3VudGFzXCIpLFxuICAgICAgICAgICAgaGVpUm93ID0gcGFyZW50X3Jvdy5oZWlnaHQoKTtcblxuICAgICAgICAgIGlmIChxdWVzdGlvbnMuaGFzQ2xhc3MoXCJpcy1oaWRkZW5cIikpIHtcbiAgICAgICAgICAgICQoXCIucHJlZ3VudGFzXCIpLmFkZENsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgcXVlc3Rpb25zLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICAgICAgbGV0IGhlaSA9IHF1ZXN0aW9ucy5oZWlnaHQoKTtcbiAgICAgICAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImpzLW1vYmlsZVwiKSkge1xuICAgICAgICAgICAgICBxdWVzdGlvbnMuY3NzKFwiYm90dG9tXCIsIGhlaSArIFwicHhcIik7XG4gICAgICAgICAgICAgIHBhcmVudF9yb3cuY3NzKFwiaGVpZ2h0XCIsIHBhcnNlSW50KGhlaSArIGhlaVJvdyArIDMwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHF1ZXN0aW9ucy5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgICAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImpzLW1vYmlsZVwiKSkge1xuICAgICAgICAgICAgICBwYXJlbnRfcm93LmNzcyhcImhlaWdodFwiLCBcImF1dG9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuXG4gICAgICBmdW5jdGlvbiBpbml0TWFwKGxhdGksIGxuZ2ksIGNvdW50ZXIpIHtcbiAgICAgICAgbGV0IGNlbnRlckxhdGkgPSBsYXRpLFxuICAgICAgICAgIGltYWdlID0ge1xuICAgICAgICAgICAgdXJsOiBcIlwiLFxuICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoNjAsIDYwKSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIG51bUNvdW50ZXIgPSBcIiBcIjtcblxuICAgICAgICBpZiAoY291bnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbnVtQ291bnRlciA9IGNvdW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJhbGlhcy0tb2ZpY2luYXNcIikpIHtcbiAgICAgICAgICBpbWFnZS51cmwgPVxuICAgICAgICAgICAgXCIvdGhlbWVzL2N1c3RvbS9saWJlcnR5X3B1YmxpYy9pbWFnZXMvaWNvbnMvaWNvbi1vZmljaW5hLnN2Z1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGltYWdlLnVybCA9XG4gICAgICAgICAgICBcIi90aGVtZXMvY3VzdG9tL2xpYmVydHlfcHVibGljL2ltYWdlcy9pY29ucy9waW4tbWFwLXJlZC5zdmdcIjtcbiAgICAgICAgfVxuICAgICAgICBjZW50ZXJMYXRpICs9IDAuMDAyO1xuICAgICAgICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJhbGlhcy0tbnVlc3RyYXMtb2ZpY2luYXNcIikpIHtcbiAgICAgICAgICBjZW50ZXJMYXRpICs9IDAuMDAzO1xuICAgICAgICB9XG4gICAgICAgIGxldCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLCB7XG4gICAgICAgICAgem9vbTogMTYsXG4gICAgICAgICAgY2VudGVyOiB7IGxhdDogY2VudGVyTGF0aSwgbG5nOiBsbmdpIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBiZWFjaE1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgIHBvc2l0aW9uOiB7IGxhdDogbGF0aSwgbG5nOiBsbmdpIH0sXG4gICAgICAgICAgb3B0aW1pemVkOiBmYWxzZSxcbiAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICBpY29uOiBpbWFnZSxcbiAgICAgICAgICBsYWJlbDoge1xuICAgICAgICAgICAgdGV4dDogbnVtQ291bnRlcixcbiAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZmZmZcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJChcIi52ZXJNYXBhXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgZWwgPSAkKHRoaXMpLFxuICAgICAgICAgIGxhdGkgPSBlbC5hdHRyKFwibGF0XCIpLFxuICAgICAgICAgIGxvbmdpID0gZWwuYXR0cihcImxuZ1wiKSxcbiAgICAgICAgICBkaXJlYyA9IGVsLmF0dHIoXCJkaXJcIiksXG4gICAgICAgICAgdGl0bGUgPSBlbC5hdHRyKFwidGl0bGVcIiksXG4gICAgICAgICAgY291bnRlciA9IGVsLmF0dHIoXCJjb3VudGVyXCIpLFxuICAgICAgICAgIHRlbCA9IGVsLmF0dHIoXCJ0ZWxlcGhvbmVcIiksXG4gICAgICAgICAgc2NoZWR1bGUgPSBlbC5jaGlsZHJlbihcImlcIikuaHRtbCgpO1xuXG4gICAgICAgICQoXCIud3JhcHBlcl9fbWFwXCIpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZGVuXCIpO1xuICAgICAgICBpbml0TWFwKHBhcnNlRmxvYXQobGF0aSksIHBhcnNlRmxvYXQobG9uZ2kpLCBjb3VudGVyKTtcbiAgICAgICAgaWYgKGVsLmhhc0NsYXNzKFwibWFwYVN1Y3Vyc2FsXCIpKSB7XG4gICAgICAgICAgJChcIiNpbmZvbWFwXCIpLmh0bWwoXG4gICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2NvbnRlbnRfX2luZm9tYXAnPlwiICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0b29sdGlwXCI+PHNwYW4gY2xhc3M9XCJ0b29sdGlwdGV4dFwiPicgK1xuICAgICAgICAgICAgICBjb3VudGVyICtcbiAgICAgICAgICAgICAgXCI8L3NwYW4+PC9kaXY+XCIgK1xuICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjbG9zZVwiPjwvc3Bhbj48aDI+JyArXG4gICAgICAgICAgICAgIHRpdGxlICtcbiAgICAgICAgICAgICAgXCI8L2gyPlwiICtcbiAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbmZvXCI+XFxuJyArXG4gICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaW5mby1yaWdodFwiPlxcbicgK1xuICAgICAgICAgICAgICAnICA8cCBjbGFzcz1cInJlZF9fZGlyZWNjaW9uXCI+PHNwYW4+JyArXG4gICAgICAgICAgICAgIGRpcmVjICtcbiAgICAgICAgICAgICAgXCI8L3NwYW4+PC9wPlxcblwiICtcbiAgICAgICAgICAgICAgJyAgPHAgY2xhc3M9XCJyZWRfX3RlbGVmb25vc1wiPjxzcGFuIGNsYXNzPVwibmFtZS1lbGVtZW50LW9mZmljZVwiPlRlbFxceEU5Zm9ub3M8L3NwYW4+JyArXG4gICAgICAgICAgICAgIHRlbCArXG4gICAgICAgICAgICAgIFwiPC9wPlxcblwiICtcbiAgICAgICAgICAgICAgJyAgPHAgY2xhc3M9XCJob3Jhcmlvc1wiPiBcXG4nICtcbiAgICAgICAgICAgICAgJzxzcGFuIHN0eWxlPVwiXFxuJyArXG4gICAgICAgICAgICAgIFwiICAgIGRpc3BsYXk6IGJsb2NrO1xcblwiICtcbiAgICAgICAgICAgICAgJ1wiPkhvcmFyaW8gZGUgYXRlbmNpXFx4RjNuPC9zcGFuPlxcbicgK1xuICAgICAgICAgICAgICBcIlwiICtcbiAgICAgICAgICAgICAgc2NoZWR1bGUgK1xuICAgICAgICAgICAgICBcIlxcblwiICtcbiAgICAgICAgICAgICAgXCI8L3A+XFxuXCIgK1xuICAgICAgICAgICAgICBcIjwvZGl2PlxcblwiICtcbiAgICAgICAgICAgICAgXCI8L2Rpdj5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGVsLmhhc0NsYXNzKFwicGF5bWVudF9wb2ludHNcIikpIHtcbiAgICAgICAgICAgICQoXCIjaW5mb21hcFwiKS5odG1sKFxuICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2NvbnRlbnRfX2luZm9tYXAnPlwiICtcbiAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjbG9zZVwiPjwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICBcIjxoMj5cIiArXG4gICAgICAgICAgICAgICAgdGl0bGUgK1xuICAgICAgICAgICAgICAgIFwiPC9oMj5cIiArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJpbmZvXCI+JyArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJyZWRfX2RpcmVjY2lvblwiPicgK1xuICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cImluZm8tcmlnaHRcIj4nICtcbiAgICAgICAgICAgICAgICBkaXJlYyArXG4gICAgICAgICAgICAgICAgXCI8L3A+XCIgK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICc8cCBjbGFzcz1cInJlZF9fdGVsZWZvbm9zXCI+JyArXG4gICAgICAgICAgICAgICAgdGVsICtcbiAgICAgICAgICAgICAgICBcIjwvcD5cIiArXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj48L2Rpdj48L2Rpdj5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIiNpbmZvbWFwXCIpLmh0bWwoXG4gICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nY29udGVudF9faW5mb21hcCc+XCIgK1xuICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNsb3NlXCI+PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgIFwiPGgyPlwiICtcbiAgICAgICAgICAgICAgICB0aXRsZSArXG4gICAgICAgICAgICAgICAgXCI8L2gyPlwiICtcbiAgICAgICAgICAgICAgICBcIjxwPlwiICtcbiAgICAgICAgICAgICAgICBkaXJlYyArXG4gICAgICAgICAgICAgICAgXCI8L3A+XCIgK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJChcIi52ZXJJbmZvXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IGVsID0gJCh0aGlzKTtcbiAgICAgICAgaWYgKGVsLnBhcmVudCgpLmhhc0NsYXNzKFwidmlld3Mtcm93XCIpKSB7XG4gICAgICAgICAgbGV0IHdyYXBwZXIgPSBlbC5wYXJlbnQoKTtcbiAgICAgICAgICB3cmFwcGVyLmZpbmQoXCIucG9wdXAtaW5mb1wiKS5hZGRDbGFzcyhcImlzLWZpeGVkLWdsb2JhbFwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgd3JhcHBlciA9IGVsLnBhcmVudCgpLnBhcmVudCgpO1xuICAgICAgICAgIHdyYXBwZXIuYWRkQ2xhc3MoXCJpcy1maXhlZC1nbG9iYWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlci5maW5kKFwiLmluZm8gcFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBsZXQgZWwgPSAkKHRoaXMpO1xuICAgICAgICAgIGlmIChlbC5oYXNDbGFzcyhcImlzLWRlc2t0b3BcIikpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUNsYXNzKFwiaXMtZGVza3RvcFwiKTtcbiAgICAgICAgICAgIGVsLmFkZENsYXNzKFwiaXMtbW9iaWxlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgJChcIi5hcnJvd0JhY2tcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgZWwgPSAkKHRoaXMpO1xuICAgICAgICBpZiAoZWwucGFyZW50KCkuaGFzQ2xhc3MoXCJwb3B1cC1pbmZvXCIpKSB7XG4gICAgICAgICAgbGV0IHdyYXBwZXIgPSBlbC5wYXJlbnQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdyYXBwZXJcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpcy1maXhlZC1nbG9iYWxcIilcbiAgICAgICAgICAuZmluZChcIi5pbmZvIHBcIilcbiAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgZWwgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKGVsLmhhc0NsYXNzKFwiaXMtbW9iaWxlXCIpKSB7XG4gICAgICAgICAgICAgIGVsLnJlbW92ZUNsYXNzKFwiaXMtbW9iaWxlXCIpO1xuICAgICAgICAgICAgICBlbC5hZGRDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgJChcIi5pbmZvIC5oZWFkZXJfX2luZm8gI2Nsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLndyYXBwZXJfX21hcFwiKS5vbihcImNsaWNrXCIsIFwiLmNsb3NlLCAjY2xvc2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiLndyYXBwZXJfX21hcFwiKS5hZGRDbGFzcyhcImlzLWhpZGRlblwiKTtcbiAgICAgIH0pO1xuICAgICAgJChcIi5vcHRpb25zLWFjY29yZGlvbiAub3B0aW9uIC52aWV3cy1maWVsZC1ub3RoaW5nXCIpLmhvdmVyKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgLnNpYmxpbmdzKFxuICAgICAgICAgICAgICBcIi5vcHRpb25zLWFjY29yZGlvbiAub3B0aW9uIC52aWV3cy1maWVsZC1kZXNjcmlwdGlvbl9fdmFsdWVcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLmFkZENsYXNzKFwib3BlblwiKTtcbiAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAucGFyZW50KFwiLm9wdGlvblwiKVxuICAgICAgICAgICAgLnBhcmVudChcIi5vcHRpb25zLWFjY29yZGlvblwiKVxuICAgICAgICAgICAgLmNzcyhcIm92ZXJmbG93XCIsIFwiaW5pdGlhbFwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoXG4gICAgICAgICAgICBcIi5vcHRpb25zLWFjY29yZGlvbiAub3B0aW9uIC52aWV3cy1maWVsZC1kZXNjcmlwdGlvbl9fdmFsdWVcIlxuICAgICAgICAgICkucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpO1xuICAgICAgICAgICQoXCIuanMtYWNjb3JkaW9uLW9wdGlvbnNcIikuY3NzKFwib3ZlcmZsb3dcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICAvL0FqdXN0ZXNcblxuICAgICAgZnVuY3Rpb24gY2xpY2tTZWN0aW9uKGJ1dHRvbikge1xuICAgICAgICAkKFwiLmNvbXBvbmVudF9fZm9ybS0tcmVkLW1lZGljYSAuY29tcG9uZW50X19jb250ZW50XCIpLnJlbW92ZUF0dHIoXG4gICAgICAgICAgXCJocmVmXCJcbiAgICAgICAgKTtcbiAgICAgICAgJChidXR0b24pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NpcCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gJChidXR0b24pLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIC8vICAgICBsZXQgdGFyZ2V0ID0gJCh0aGlzLmdldEF0dHJpYnV0ZSgnaHJlZicpKTtcbiAgICAgICAgLy8gICAgIGlmICh0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAgIC8vICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgLy8gICAgICAgICAkKCcuY29tcG9uZW50X19mb3JtLS1yZWQtbWVkaWNhIC5jb21wb25lbnRfX2NvbnRlbnQnKS5zdG9wKCkuYW5pbWF0ZSh7XG4gICAgICAgIC8vICAgICAgICAgICAgIHNjcm9sbFRvcDogdGFyZ2V0Lm9mZnNldCgpLnRvcFxuICAgICAgICAvLyAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAvLyAgICAgfVxuICAgICAgICAvLyB9KTtcbiAgICAgIH1cbiAgICAgIGNsaWNrU2VjdGlvbihcIi5jb21wb25lbnRfX2Zvcm0tLXJlZC1tZWRpY2EgLmNvbXBvbmVudF9fY29udGVudFwiKTtcblxuICAgICAgLy8gd29ya3Nob3BzIGZpbHRlclxuICAgICAgJChcbiAgICAgICAgXCIuYWxpYXMtLXNpbmllc3Ryb3MtdGFsbGVyZXMtcHJlZmVyZW5jaWFsZXMgLnZpZXctdGFsbGVyZXMgLmZvcm0tc2VsZWN0XCJcbiAgICAgICkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFxuICAgICAgICAgIFwiLmFsaWFzLS1zaW5pZXN0cm9zLXRhbGxlcmVzLXByZWZlcmVuY2lhbGVzIC52aWV3LXRhbGxlcmVzIC5qcy1mb3JtLXN1Ym1pdFwiXG4gICAgICAgICkuY2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLnRleHRfZmlsZV9lcnJvcl9pbnB1dFwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgZmlsZW5hbWUgPSAkKFwiaW5wdXRbdHlwZT1maWxlXVwiKS52YWwoKS5zcGxpdChcIlxcXFxcIikucG9wKCk7XG4gICAgICAgIGNvbnN0IG15QXJyID0gZmlsZW5hbWUuc3BsaXQoXCIuXCIpLnBvcCgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBteUFyciAhPSBcInBkZlwiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJnaWZcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwianBnXCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcInBuZ1wiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJ0eHRcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwiZG9jXCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcImRvY3hcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwicHB0XCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcInBwdHhcIiAmJlxuICAgICAgICAgIG15QXJyICE9IFwieGxzXCIgJiZcbiAgICAgICAgICBteUFyciAhPSBcInhsc1wiICYmXG4gICAgICAgICAgbXlBcnIgIT0gXCJ6aXBcIlxuICAgICAgICApIHtcbiAgICAgICAgICAkKFwiLnRleHRfZmlsZV9lcnJvclwiKS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChcIi50ZXh0X2ZpbGVfZXJyb3JcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJChcIi50ZXh0X2ZpbGVfZXJyb3JfaW5wdXRfMlwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgaW5wdXRmaWxlID0gJChcIi50ZXh0X2ZpbGVfZXJyb3JfaW5wdXRfMlwiKS5maW5kKFxuICAgICAgICAgICdpbnB1dFtuYW1lPVwiZmlsZXNbYWRqdW50YXJfYXJjaGl2b3NdXCJdJ1xuICAgICAgICApO1xuICAgICAgICBpbnB1dGZpbGUgPSBpbnB1dGZpbGUudmFsKCkuc3BsaXQoXCJcXFxcXCIpLnBvcCgpO1xuICAgICAgICBpbnB1dGZpbGUgPSBpbnB1dGZpbGUuc3BsaXQoXCIuXCIpLnBvcCgpO1xuICAgICAgICBjb25zb2xlLmxvZyhpbnB1dGZpbGUpO1xuICAgICAgICBpZiAoaW5wdXRmaWxlICE9IFwicGRmXCIpIHtcbiAgICAgICAgICAkKFwiLnRleHRfZmlsZV9lcnJvcjJcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoXCIudGV4dF9maWxlX2Vycm9yMlwiKS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoJChcIi5mb3JtLWl0ZW0tYWRqdW50YXItYXJjaGl2b3NcIikpIHtcbiAgICAgICAgbGV0IGxhYmVsX2FkanVudGFyID0gJCh0aGlzKS5maW5kKFwibGFiZWxcIikuaHRtbCgpO1xuICAgICAgICBsYWJlbF9hZGp1bnRhciA9IGxhYmVsX2FkanVudGFyICsgXCI8YnI+XCI7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn0pKGpRdWVyeSwgRHJ1cGFsLCB0aGlzLCB0aGlzLmRvY3VtZW50KTtcbiJdfQ==
