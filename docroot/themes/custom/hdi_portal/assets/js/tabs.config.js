!function(t,s,a){"use strict";s.behaviors.tabsJS={attach:function(s,e){t(".cp-tabs").not(".is-shorcut, .popup-no-tabs").tabs(),t("body").hasClass("js-mobile")&&(t(".sub-tab__row").each((function(){let s=t(this),a=s.find(".sub-tab__content ol li"),e=a.length,i=a.slice(0,3);e>3&&(a.each((function(){t(this).hide()})),i.each((function(){t(this).show()})),s.children(".view-more").css("visibility","visible"))})),t(".component__tabs--contact").length>0&&t(".component__tabs--contact .cp-tabs .component__card").on("click",(function(){let s=t(this).children(".cta").children("a").attr("href");if(t(this).parents(".cp-tabs").hasClass("popup-no-tabs"))return a.location.replace(s),!1;t(this).parents(".cp-tabs").children(s).addClass("active")})));let i=function(t,s){t.find("option:eq(0)").attr("selected","selected").trigger("change"),t.triggerHandler("focus"),void 0!==s.find(".sub-tabs").tabs("instance")&&s.parents(".block-tabs-assistances, .block-tabs-documents-required").length>0&&s.find(".sub-tabs").tabs("destroy")};t((function(){let s=t("#tabs .component__heading ul li.ui-state-active a").attr("href"),a=t(s),e=a.find(".select--tabs");i(e,a)})),t(".cp-tabs ul li a").on("click",(function(s){if(!t(this).hasClass("popup-no-tabs")){console.log("hola andres");let s=t(this),a=s.attr("href"),e=s.parents(".cp-tabs").children(a),o=e.find(".js-slider-mobile"),n=e.find(".select--tabs");n.length>0&&i(n,t(a)),o.length>0&&setTimeout((function(){o.find(".cog--items").slick("setPosition")}),10)}}));let o=function(t){let s,e,i=a.location.search.substring(1).split("&");for(e=0;e<i.length;e++)if(s=i[e].split("="),s[0]===t)return void 0===s[1]||decodeURIComponent(s[1])}("tab");void 0!==o&&t('a[href="#tabs-'+o+'"]').click(),t(".cp-tabs.is-shorcut .normal-tab a").on("click",(function(s){s.preventDefault(),t(".cp-tabs.is-shorcut .normal-tab a").removeClass("active"),t(this).addClass("active");let a=t(this).attr("href"),e=t(a).offset().top;console.log(e),t("html, body").stop(!0,!0).animate({scrollTop:t(a).offset().top-70},1e3)})),t(".select--tabs").change((function(){if(t(this).parent().parent().parent().parent().find(".sub-tab__container").length>0){t(this).parent().parent().parent().parent().find(".sub-tab__container").hide();let s=t(this).val();t("#"+s).show()}else t(".tabs").hide(),t("#"+t(this).val()).show()})),t(".component__tabs--contact").length>0&&(t(".component__tabs--contact .cp-tabs li").removeClass("ui-tabs-active ui-state-active"),t(".component__tabs--contact .cp-tabs li .component__card a").click((function(s){if(!t(this).hasClass("popup-no-tabs")){s.preventDefault(),t(this).parents(".component__tabs--contact .cp-tabs li").addClass("ui-tabs-active ui-state-active");let a=t(this).attr("href");a=a.substr(1),t(this).parents(".cp-tabs").find(".tabs").removeClass("active"),t(this).parents(".cp-tabs").find("#"+a).addClass("active")}})),t(".component__tabs--contact .cp-tabs .tabs form #close").click((function(s){t(this).parents(".tabs").removeClass("active")}))),t("#sub-tabs .component__heading").each((function(){let s=t(this);1===s.find(".select--tabs").find("option").length&&s.hide()})),t(".sub-tab__row .view-more").on("click",(function(s){s.preventDefault();let a=t(this).parents(".sub-tab__row");a.addClass("popup"),a.find(".sub-tab__heading-img").addClass("card__img--oval"),a.find(".sub-tab__content ol li").each((function(){t(this).show()}))})),t(".sub-tab__row .popup-close").on("click",(function(s){s.preventDefault();let a=t(this).parents(".sub-tab__row");a.find(".sub-tab__heading-img").removeClass("card__img--oval"),a.find(".sub-tab__content ol li").each((function(s){s>2&&t(this).hide()})),a.removeClass("popup")})),t((function(){let s=t(".is-shorcut .main-links");if(s.length>0){let e=Math.ceil(s.offset().top)-10;t(a).scroll((function(){t(a).scrollTop()>e?s.addClass("fixed").parent(".cog--mq").addClass("is-fixed").css("margin-bottom","5.25rem"):s.removeClass("fixed").parent(".cog--mq").removeClass("is-fixed").css("margin-bottom","")}))}})),t((function(){let s=t(".is-shorcut");s.length>0&&t(a).scroll((function(){s.find("div.tabs").each((function(){let e=t(this),i=e.attr("id"),o=Math.ceil(e.offset().top)-80;t(a).scrollTop()>o&&(s.find("a.active").removeClass("active"),s.find('a[href="#'+i+'"]').addClass("active"))}))}))})),t(".component__shorcuts .sticky-item a").on("click",(function(s){s.preventDefault(),t(".component__shorcuts .sticky-item, .component__shorcuts .sticky-item a").removeClass("active"),t(this).parent().addClass("active"),t(this).addClass("active");let a=t(this).attr("href"),e=t(a).offset().top;console.log(e),t("html, body").stop(!0,!0).animate({scrollTop:t(a).offset().top-70},1e3),s.stopPropagation()})),t((function(){let s=t(".component__shorcuts .sticky-wrapper");if(s.length>0){let e=Math.ceil(s.offset().top)+16;t(a).scroll((function(){t(a).scrollTop()>e?s.addClass("is-fixed").parent(".sticky-container").css("margin-bottom","11.25rem"):s.removeClass("is-fixed").parent(".sticky-container").css("margin-bottom","")}))}})),t((function(){let s=t(".block-system-main-block");s.length>0&&t(a).scroll((function(){s.find("div.shortcut-item").each((function(){let e=t(this),i=e.attr("id"),o=Math.ceil(e.offset().top)-80;t(a).scrollTop()>o&&(s.find(".sticky-item").removeClass("active"),s.find(".sticky-item a").removeClass("active"),s.find('.sticky-item a[href="#'+i+'"]').parent().addClass("active"),s.find('.sticky-item a[href="#'+i+'"]').addClass("active"))}))}))})),t(a).bind("hashchange",(function(t){location.reload(!0)})),t(".cp-tabs").find("ul").children('li[role="tab"]').attr("tabindex","0"),t(".tabs--menu-mobile .tab--first a").click((function(s){s.preventDefault(),t(".tab--first").hasClass("active")||(t(".tab--second").removeClass("active"),t(".tab--first").addClass("active"),t(".tab-content--first").removeClass("is-desktop"),t(".tab-content--second").addClass("is-desktop"))})),t(".tabs--menu-mobile .tab--second a").click((function(s){s.preventDefault(),t(".tab--second").hasClass("active")||(t(".tab--first").removeClass("active"),t(".tab--second").addClass("active"),t(".tab-content--second").removeClass("is-desktop"),t(".tab-content--first").addClass("is-desktop"))})),t(".tabs--pagos-online .component__card").click((function(s){s.preventDefault(),t(".tabs--pagos-online .component__card").removeClass("item-active"),t(this).addClass("item-active"),t(".tabs__formas-de-pago #tab-0 .component").removeClass("is-hide-mb"),t(this).hasClass("item-first")&&t(".tabs__formas-de-pago #tab-0 .js-item-second, .tabs__formas-de-pago #tab-0 .js-item-third").addClass("is-hide-mb"),t(this).hasClass("item-second")&&t(".tabs__formas-de-pago #tab-0 .js-item-first, .tabs__formas-de-pago #tab-0 .js-item-third").addClass("is-hide-mb"),t(this).hasClass("item-third")&&t(".tabs__formas-de-pago #tab-0 .js-item-first, .tabs__formas-de-pago #tab-0 .js-item-second").addClass("is-hide-mb")})),t(".tabs--financia .component__card").click((function(s){s.preventDefault(),t(".tabs--financia .component__card").removeClass("item-active"),t(this).addClass("item-active"),t(".tabs__formas-de-pago #tab-1 .component").removeClass("is-hide-mb"),t(this).hasClass("item-first")&&t(".tabs__formas-de-pago #tab-1 .js-item-second, .tabs__formas-de-pago #tab-1 .js-item-third").addClass("is-hide-mb"),t(this).hasClass("item-second")&&t(".tabs__formas-de-pago #tab-1 .js-item-first, .tabs__formas-de-pago #tab-1 .js-item-third").addClass("is-hide-mb"),t(this).hasClass("item-third")&&t(".tabs__formas-de-pago #tab-1 .js-item-first, .tabs__formas-de-pago #tab-1 .js-item-second").addClass("is-hide-mb")})),t(".tabs--otras-formas-pago .component__card").click((function(s){s.preventDefault(),t(".tabs--otras-formas-pago .component__card").removeClass("item-active"),t(this).addClass("item-active"),t(".canales-pago .payment-row:nth-child(2), .canales-pago .payment-row:nth-child(3)").hide(),t(this).hasClass("item-first")&&(t(".canales-pago .payment-row:nth-child(2), .canales-pago .payment-row:nth-child(3)").hide(),t(".canales-pago .payment-row:nth-child(1)").show()),t(this).hasClass("item-second")&&(t(".canales-pago .payment-row:nth-child(1), .canales-pago .payment-row:nth-child(3)").hide(),t(".canales-pago .payment-row:nth-child(2)").show()),t(this).hasClass("item-third")&&(t(".canales-pago .payment-row:nth-child(1), .canales-pago .payment-row:nth-child(2)").hide(),t(".canales-pago .payment-row:nth-child(3)").show())}))}}}(jQuery,Drupal,this,this.document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5jb25maWcuanMiLCJuYW1lcyI6WyIkIiwiRHJ1cGFsIiwid2luZG93IiwiYmVoYXZpb3JzIiwidGFic0pTIiwiYXR0YWNoIiwiY29udGV4dCIsInNldHRpbmdzIiwibm90IiwidGFicyIsImhhc0NsYXNzIiwiZWFjaCIsInJvdyIsInRoaXMiLCJzdGVwcyIsImZpbmQiLCJudW1fc3RlcHMiLCJsZW5ndGgiLCJ2aXNpYmxlX3N0ZXBzIiwic2xpY2UiLCJoaWRlIiwic2hvdyIsImNoaWxkcmVuIiwiY3NzIiwib24iLCJpZF90YWIiLCJhdHRyIiwicGFyZW50cyIsImxvY2F0aW9uIiwicmVwbGFjZSIsImFkZENsYXNzIiwiZml4X3N1YnRhYnNfYXNzaXN0YW5jZXMiLCJzZWxlY3QiLCJ0YWIiLCJ0cmlnZ2VyIiwidHJpZ2dlckhhbmRsZXIiLCJ1bmRlZmluZWQiLCJlIiwiY29uc29sZSIsImxvZyIsImVsIiwiaWRfYm9keV90YWIiLCJib2R5X3RhYiIsImpzX3NsaWRlciIsInNldFRpbWVvdXQiLCJzbGljayIsImFjdGl2ZV90YWIiLCJzUGFyYW0iLCJzUGFyYW1ldGVyTmFtZSIsImkiLCJzVVJMVmFyaWFibGVzIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJnZXRVcmxQYXJhbWV0ZXIiLCJjbGljayIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlQ2xhc3MiLCJzdHJBbmNsYSIsInBvcCIsIm9mZnNldCIsInRvcCIsInN0b3AiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwiY2hhbmdlIiwicGFyZW50IiwiaWQiLCJ2YWwiLCIkaWRfdGFiIiwic3Vic3RyIiwic3ViX3RhYiIsImluZCIsIm1lbnUiLCJtZW51Rml4ZWRoZWlnaHQiLCJNYXRoIiwiY2VpbCIsInNjcm9sbCIsInBvcDIiLCJzdG9wUHJvcGFnYXRpb24iLCJiaW5kIiwicmVsb2FkIiwialF1ZXJ5IiwiZG9jdW1lbnQiXSwic291cmNlcyI6WyJ0YWJzLmNv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cnVwYWwsIHdpbmRvdywgZG9jdW1lbnQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLy8gRXhhbXBsZSBvZiBEcnVwYWwgYmVoYXZpb3IgbG9hZGVkLlxuICBEcnVwYWwuYmVoYXZpb3JzLnRhYnNKUyA9IHtcbiAgICBhdHRhY2g6IGZ1bmN0aW9uIChjb250ZXh0LCBzZXR0aW5ncykge1xuICAgICAgJChcIi5jcC10YWJzXCIpLm5vdChcIi5pcy1zaG9yY3V0LCAucG9wdXAtbm8tdGFic1wiKS50YWJzKCk7XG5cbiAgICAgIGlmICgkKFwiYm9keVwiKS5oYXNDbGFzcyhcImpzLW1vYmlsZVwiKSkge1xuICAgICAgICAvLyBBc2lzdGVuY2lhcyB2aWV3IG1vcmVcbiAgICAgICAgJChcIi5zdWItdGFiX19yb3dcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbGV0IHJvdyA9ICQodGhpcyksXG4gICAgICAgICAgICBzdGVwcyA9IHJvdy5maW5kKFwiLnN1Yi10YWJfX2NvbnRlbnQgb2wgbGlcIiksXG4gICAgICAgICAgICBudW1fc3RlcHMgPSBzdGVwcy5sZW5ndGgsXG4gICAgICAgICAgICB2aXNpYmxlX3N0ZXBzID0gc3RlcHMuc2xpY2UoMCwgMyk7XG4gICAgICAgICAgLy9yb3cuY2hpbGRyZW4oJy52aWV3LW1vcmUnKS5oaWRlKCk7XG4gICAgICAgICAgaWYgKG51bV9zdGVwcyA+IDMpIHtcbiAgICAgICAgICAgIHN0ZXBzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmlzaWJsZV9zdGVwcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS5zaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJvdy5jaGlsZHJlbihcIi52aWV3LW1vcmVcIikuY3NzKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUYWJzIGNvbnRhY3RcbiAgICAgICAgaWYgKCQoXCIuY29tcG9uZW50X190YWJzLS1jb250YWN0XCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBBZGQgY2xpY2sgY2FyZCBpbiBtb2JpbGVcbiAgICAgICAgICAkKFwiLmNvbXBvbmVudF9fdGFicy0tY29udGFjdCAuY3AtdGFicyAuY29tcG9uZW50X19jYXJkXCIpLm9uKFxuICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBsZXQgaWRfdGFiID0gJCh0aGlzKS5jaGlsZHJlbihcIi5jdGFcIikuY2hpbGRyZW4oXCJhXCIpLmF0dHIoXCJocmVmXCIpO1xuICAgICAgICAgICAgICBpZiAoJCh0aGlzKS5wYXJlbnRzKFwiLmNwLXRhYnNcIikuaGFzQ2xhc3MoXCJwb3B1cC1uby10YWJzXCIpKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoaWRfdGFiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnRzKFwiLmNwLXRhYnNcIikuY2hpbGRyZW4oaWRfdGFiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBmaXhfc3VidGFic19hc3Npc3RhbmNlcyA9IGZ1bmN0aW9uIChzZWxlY3QsIHRhYikge1xuICAgICAgICBzZWxlY3RcbiAgICAgICAgICAuZmluZChcIm9wdGlvbjplcSgwKVwiKVxuICAgICAgICAgIC5hdHRyKFwic2VsZWN0ZWRcIiwgXCJzZWxlY3RlZFwiKVxuICAgICAgICAgIC50cmlnZ2VyKFwiY2hhbmdlXCIpO1xuICAgICAgICBzZWxlY3QudHJpZ2dlckhhbmRsZXIoXCJmb2N1c1wiKTtcbiAgICAgICAgaWYgKHRhYi5maW5kKFwiLnN1Yi10YWJzXCIpLnRhYnMoXCJpbnN0YW5jZVwiKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGFiLnBhcmVudHMoXG4gICAgICAgICAgICAgIFwiLmJsb2NrLXRhYnMtYXNzaXN0YW5jZXMsIC5ibG9jay10YWJzLWRvY3VtZW50cy1yZXF1aXJlZFwiXG4gICAgICAgICAgICApLmxlbmd0aCA+IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRhYi5maW5kKFwiLnN1Yi10YWJzXCIpLnRhYnMoXCJkZXN0cm95XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgJChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpZF90YWIgPSAkKFxuICAgICAgICAgICAgXCIjdGFicyAuY29tcG9uZW50X19oZWFkaW5nIHVsIGxpLnVpLXN0YXRlLWFjdGl2ZSBhXCJcbiAgICAgICAgICApLmF0dHIoXCJocmVmXCIpLFxuICAgICAgICAgIHRhYiA9ICQoaWRfdGFiKSxcbiAgICAgICAgICBzZWxlY3QgPSB0YWIuZmluZChcIi5zZWxlY3QtLXRhYnNcIik7XG5cbiAgICAgICAgZml4X3N1YnRhYnNfYXNzaXN0YW5jZXMoc2VsZWN0LCB0YWIpO1xuICAgICAgfSk7XG5cbiAgICAgICQoXCIuY3AtdGFicyB1bCBsaSBhXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKCEoJCh0aGlzKS5oYXNDbGFzcygncG9wdXAtbm8tdGFicycpKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaG9sYSBhbmRyZXNcIik7XG4gICAgICAgICAgbGV0IGVsID0gJCh0aGlzKSxcbiAgICAgICAgICAgIGlkX2JvZHlfdGFiID0gZWwuYXR0cihcImhyZWZcIiksXG4gICAgICAgICAgICBib2R5X3RhYiA9IGVsLnBhcmVudHMoXCIuY3AtdGFic1wiKS5jaGlsZHJlbihpZF9ib2R5X3RhYiksXG4gICAgICAgICAgICBqc19zbGlkZXIgPSBib2R5X3RhYi5maW5kKFwiLmpzLXNsaWRlci1tb2JpbGVcIiksXG4gICAgICAgICAgICBzZWxlY3QgPSBib2R5X3RhYi5maW5kKFwiLnNlbGVjdC0tdGFic1wiKTtcblxuICAgICAgICAgIGlmIChzZWxlY3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZml4X3N1YnRhYnNfYXNzaXN0YW5jZXMoc2VsZWN0LCAkKGlkX2JvZHlfdGFiKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGpzX3NsaWRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAganNfc2xpZGVyLmZpbmQoXCIuY29nLS1pdGVtc1wiKS5zbGljayhcInNldFBvc2l0aW9uXCIpO1xuICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGxldCBnZXRVcmxQYXJhbWV0ZXIgPSBmdW5jdGlvbiAoc1BhcmFtKSB7XG4gICAgICAgIGxldCBzUGFnZVVSTCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpLFxuICAgICAgICAgIHNVUkxWYXJpYWJsZXMgPSBzUGFnZVVSTC5zcGxpdChcIiZcIiksXG4gICAgICAgICAgc1BhcmFtZXRlck5hbWUsXG4gICAgICAgICAgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHNVUkxWYXJpYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzUGFyYW1ldGVyTmFtZSA9IHNVUkxWYXJpYWJsZXNbaV0uc3BsaXQoXCI9XCIpO1xuXG4gICAgICAgICAgaWYgKHNQYXJhbWV0ZXJOYW1lWzBdID09PSBzUGFyYW0pIHtcbiAgICAgICAgICAgIHJldHVybiBzUGFyYW1ldGVyTmFtZVsxXSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgID8gdHJ1ZVxuICAgICAgICAgICAgICA6IGRlY29kZVVSSUNvbXBvbmVudChzUGFyYW1ldGVyTmFtZVsxXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBsZXQgYWN0aXZlX3RhYiA9IGdldFVybFBhcmFtZXRlcihcInRhYlwiKTtcblxuICAgICAgaWYgKGFjdGl2ZV90YWIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAkKCdhW2hyZWY9XCIjdGFicy0nICsgYWN0aXZlX3RhYiArICdcIl0nKS5jbGljaygpO1xuICAgICAgfVxuXG4gICAgICAkKFwiLmNwLXRhYnMuaXMtc2hvcmN1dCAubm9ybWFsLXRhYiBhXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKFwiLmNwLXRhYnMuaXMtc2hvcmN1dCAubm9ybWFsLXRhYiBhXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICBsZXQgc3RyQW5jbGEgPSAkKHRoaXMpLmF0dHIoXCJocmVmXCIpOyAvL2lkIGRlbCBhbmNsYVxuXG4gICAgICAgIGxldCBwb3AgPSAkKHN0ckFuY2xhKS5vZmZzZXQoKS50b3A7XG4gICAgICAgIGNvbnNvbGUubG9nKHBvcCk7XG4gICAgICAgICQoXCJodG1sLCBib2R5XCIpXG4gICAgICAgICAgLnN0b3AodHJ1ZSwgdHJ1ZSlcbiAgICAgICAgICAuYW5pbWF0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHN0ckFuY2xhKS5vZmZzZXQoKS50b3AgLSA3MCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDAwXG4gICAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBUYWJzXG4gICAgICAkKFwiLnNlbGVjdC0tdGFic1wiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgJCh0aGlzKVxuICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAuZmluZChcIi5zdWItdGFiX19jb250YWluZXJcIikubGVuZ3RoID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgLnBhcmVudCgpXG4gICAgICAgICAgICAucGFyZW50KClcbiAgICAgICAgICAgIC5maW5kKFwiLnN1Yi10YWJfX2NvbnRhaW5lclwiKVxuICAgICAgICAgICAgLmhpZGUoKTtcbiAgICAgICAgICBsZXQgaWQgPSAkKHRoaXMpLnZhbCgpO1xuICAgICAgICAgICQoXCIjXCIgKyBpZCkuc2hvdygpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoXCIudGFic1wiKS5oaWRlKCk7XG4gICAgICAgICAgJChcIiNcIiArICQodGhpcykudmFsKCkpLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIFRhYnMgY29udGFjdFxuICAgICAgaWYgKCQoXCIuY29tcG9uZW50X190YWJzLS1jb250YWN0XCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gQWRkIGFjdGl2ZSB0YWJzIGNvbnRhY3RcbiAgICAgICAgJChcIi5jb21wb25lbnRfX3RhYnMtLWNvbnRhY3QgLmNwLXRhYnMgbGlcIikucmVtb3ZlQ2xhc3MoXG4gICAgICAgICAgXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIlxuICAgICAgICApO1xuICAgICAgICAkKFwiLmNvbXBvbmVudF9fdGFicy0tY29udGFjdCAuY3AtdGFicyBsaSAuY29tcG9uZW50X19jYXJkIGFcIikuY2xpY2soXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmKCEoJCh0aGlzKS5oYXNDbGFzcygncG9wdXAtbm8tdGFicycpKSkge1xuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAucGFyZW50cyhcIi5jb21wb25lbnRfX3RhYnMtLWNvbnRhY3QgLmNwLXRhYnMgbGlcIilcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIik7XG4gICAgICAgICAgICAgIGxldCAkaWRfdGFiID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTtcbiAgICAgICAgICAgICAgJGlkX3RhYiA9ICRpZF90YWIuc3Vic3RyKDEpO1xuICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCIuY3AtdGFic1wiKS5maW5kKFwiLnRhYnNcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAucGFyZW50cyhcIi5jcC10YWJzXCIpXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIjXCIgKyAkaWRfdGFiKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgICQoXCIuY29tcG9uZW50X190YWJzLS1jb250YWN0IC5jcC10YWJzIC50YWJzIGZvcm0gI2Nsb3NlXCIpLmNsaWNrKFxuICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudHMoXCIudGFic1wiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIEhpZGUgc3VidGFicyBpZiBvbmx5IGV4aXN0IDEgdGFiLCBzaG93IGFycm93cyBvbiBlbnRlcnByaXNlIGFzc2l0YW5jZXNcbiAgICAgICQoXCIjc3ViLXRhYnMgLmNvbXBvbmVudF9faGVhZGluZ1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHN1Yl90YWIgPSAkKHRoaXMpLFxuICAgICAgICAgIHNlbGVjdCA9IHN1Yl90YWIuZmluZChcIi5zZWxlY3QtLXRhYnNcIiksXG4gICAgICAgICAgcHJvZHVjdF9zdWJfdGFicyA9IHNlbGVjdC5maW5kKFwib3B0aW9uXCIpLmxlbmd0aDtcblxuICAgICAgICBpZiAocHJvZHVjdF9zdWJfdGFicyA9PT0gMSkge1xuICAgICAgICAgIHN1Yl90YWIuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJChcIi5zdWItdGFiX19yb3cgLnZpZXctbW9yZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgbGV0IHBhcmVudCA9ICQodGhpcykucGFyZW50cyhcIi5zdWItdGFiX19yb3dcIik7XG4gICAgICAgIHBhcmVudC5hZGRDbGFzcyhcInBvcHVwXCIpO1xuICAgICAgICBwYXJlbnQuZmluZChcIi5zdWItdGFiX19oZWFkaW5nLWltZ1wiKS5hZGRDbGFzcyhcImNhcmRfX2ltZy0tb3ZhbFwiKTtcbiAgICAgICAgcGFyZW50LmZpbmQoXCIuc3ViLXRhYl9fY29udGVudCBvbCBsaVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkKHRoaXMpLnNob3coKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgJChcIi5zdWItdGFiX19yb3cgLnBvcHVwLWNsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBsZXQgcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiLnN1Yi10YWJfX3Jvd1wiKTtcbiAgICAgICAgcGFyZW50LmZpbmQoXCIuc3ViLXRhYl9faGVhZGluZy1pbWdcIikucmVtb3ZlQ2xhc3MoXCJjYXJkX19pbWctLW92YWxcIik7XG4gICAgICAgIHBhcmVudC5maW5kKFwiLnN1Yi10YWJfX2NvbnRlbnQgb2wgbGlcIikuZWFjaChmdW5jdGlvbiAoaW5kKSB7XG4gICAgICAgICAgaWYgKGluZCA+IDIpIHtcbiAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDbGFzcyhcInBvcHVwXCIpO1xuICAgICAgfSk7XG5cbiAgICAgICQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBDb21wb25lbnRlIG1lbnV0YWJzIGZpeGVkIHNjcm9sbCBkZXRhbGxlIHByb2R1Y3RvXG4gICAgICAgIGxldCBtZW51ID0gJChcIi5pcy1zaG9yY3V0IC5tYWluLWxpbmtzXCIpO1xuICAgICAgICBpZiAobWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbGV0IG1lbnVGaXhlZCA9IE1hdGguY2VpbChtZW51Lm9mZnNldCgpLnRvcCksXG4gICAgICAgICAgICBtZW51Rml4ZWRoZWlnaHQgPSBtZW51Rml4ZWQgLSAxMDtcblxuICAgICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGlmICh3aW5kb3dIZWlnaHQgPiBtZW51Rml4ZWRoZWlnaHQpIHtcbiAgICAgICAgICAgICAgbWVudVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcyhcImZpeGVkXCIpXG4gICAgICAgICAgICAgICAgLnBhcmVudChcIi5jb2ctLW1xXCIpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiaXMtZml4ZWRcIilcbiAgICAgICAgICAgICAgICAuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBcIjUuMjVyZW1cIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtZW51XG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKFwiZml4ZWRcIilcbiAgICAgICAgICAgICAgICAucGFyZW50KFwiLmNvZy0tbXFcIilcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoXCJpcy1maXhlZFwiKVxuICAgICAgICAgICAgICAgIC5jc3MoXCJtYXJnaW4tYm90dG9tXCIsIFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJChmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEhpZ2hsaWdodCBhY3R1YWwgY29tcG9uZW50IGxpbmsgb24gc2Nyb2xsXG4gICAgICAgIGxldCBtZW51ID0gJChcIi5pcy1zaG9yY3V0XCIpO1xuICAgICAgICBpZiAobWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZW51LmZpbmQoXCJkaXYudGFic1wiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGV0IGVsID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBpZCA9IGVsLmF0dHIoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICBtZW51Rml4ZWQgPSBNYXRoLmNlaWwoZWwub2Zmc2V0KCkudG9wKSAtIDgwLFxuICAgICAgICAgICAgICAgIG1lbnVGaXhlZGhlaWdodCA9IG1lbnVGaXhlZCxcbiAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgICAgaWYgKHdpbmRvd0hlaWdodCA+IG1lbnVGaXhlZGhlaWdodCkge1xuICAgICAgICAgICAgICAgIG1lbnUuZmluZChcImEuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIG1lbnUuZmluZCgnYVtocmVmPVwiIycgKyBpZCArICdcIl0nKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLmNvbXBvbmVudF9fc2hvcmN1dHMgLnN0aWNreS1pdGVtIGFcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICQoXG4gICAgICAgICAgXCIuY29tcG9uZW50X19zaG9yY3V0cyAuc3RpY2t5LWl0ZW0sIC5jb21wb25lbnRfX3Nob3JjdXRzIC5zdGlja3ktaXRlbSBhXCJcbiAgICAgICAgKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgbGV0IHN0ckFuY2xhID0gJCh0aGlzKS5hdHRyKFwiaHJlZlwiKTsgLy9pZCBkZWwgYW5jbGFcblxuICAgICAgICBsZXQgcG9wMiA9ICQoc3RyQW5jbGEpLm9mZnNldCgpLnRvcDtcbiAgICAgICAgY29uc29sZS5sb2cocG9wMik7XG4gICAgICAgICQoXCJodG1sLCBib2R5XCIpXG4gICAgICAgICAgLnN0b3AodHJ1ZSwgdHJ1ZSlcbiAgICAgICAgICAuYW5pbWF0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKHN0ckFuY2xhKS5vZmZzZXQoKS50b3AgLSA3MCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMDAwXG4gICAgICAgICAgKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH0pO1xuXG4gICAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ29tcG9uZW50ZSBtZW51dGFicyBmaXhlZCBzY3JvbGwgZGV0YWxsZSBwcm9kdWN0b1xuICAgICAgICBsZXQgbWVudSA9ICQoXCIuY29tcG9uZW50X19zaG9yY3V0cyAuc3RpY2t5LXdyYXBwZXJcIik7XG4gICAgICAgIGlmIChtZW51Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBsZXQgbWVudUZpeGVkID0gTWF0aC5jZWlsKG1lbnUub2Zmc2V0KCkudG9wKSxcbiAgICAgICAgICAgIG1lbnVGaXhlZGhlaWdodCA9IG1lbnVGaXhlZCArIDE2O1xuXG4gICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgaWYgKHdpbmRvd0hlaWdodCA+IG1lbnVGaXhlZGhlaWdodCkge1xuICAgICAgICAgICAgICBtZW51XG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiaXMtZml4ZWRcIilcbiAgICAgICAgICAgICAgICAucGFyZW50KFwiLnN0aWNreS1jb250YWluZXJcIilcbiAgICAgICAgICAgICAgICAuY3NzKFwibWFyZ2luLWJvdHRvbVwiLCBcIjExLjI1cmVtXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbWVudVxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyhcImlzLWZpeGVkXCIpXG4gICAgICAgICAgICAgICAgLnBhcmVudChcIi5zdGlja3ktY29udGFpbmVyXCIpXG4gICAgICAgICAgICAgICAgLmNzcyhcIm1hcmdpbi1ib3R0b21cIiwgXCJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSGlnaGxpZ2h0IGFjdHVhbCBjb21wb25lbnQgbGluayBvbiBzY3JvbGxcbiAgICAgICAgbGV0IG1lbnUgPSAkKFwiLmJsb2NrLXN5c3RlbS1tYWluLWJsb2NrXCIpO1xuICAgICAgICBpZiAobWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZW51LmZpbmQoXCJkaXYuc2hvcnRjdXQtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgbGV0IGVsID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBpZCA9IGVsLmF0dHIoXCJpZFwiKSxcbiAgICAgICAgICAgICAgICBtZW51Rml4ZWQgPSBNYXRoLmNlaWwoZWwub2Zmc2V0KCkudG9wKSAtIDgwLFxuICAgICAgICAgICAgICAgIG1lbnVGaXhlZGhlaWdodCA9IG1lbnVGaXhlZCxcbiAgICAgICAgICAgICAgICB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgICAgaWYgKHdpbmRvd0hlaWdodCA+IG1lbnVGaXhlZGhlaWdodCkge1xuICAgICAgICAgICAgICAgIG1lbnUuZmluZChcIi5zdGlja3ktaXRlbVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBtZW51LmZpbmQoXCIuc3RpY2t5LWl0ZW0gYVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBtZW51XG4gICAgICAgICAgICAgICAgICAuZmluZCgnLnN0aWNreS1pdGVtIGFbaHJlZj1cIiMnICsgaWQgKyAnXCJdJylcbiAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxuICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIG1lbnVcbiAgICAgICAgICAgICAgICAgIC5maW5kKCcuc3RpY2t5LWl0ZW0gYVtocmVmPVwiIycgKyBpZCArICdcIl0nKVxuICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgICQod2luZG93KS5iaW5kKFwiaGFzaGNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWdyZWdhbmRvIHRhYmluZGV4IGEgY2FkYSB0YWJcbiAgICAgICQoXCIuY3AtdGFic1wiKS5maW5kKFwidWxcIikuY2hpbGRyZW4oJ2xpW3JvbGU9XCJ0YWJcIl0nKS5hdHRyKFwidGFiaW5kZXhcIiwgXCIwXCIpO1xuXG4gICAgICAvL21lbnUgbW9iaWxlXG4gICAgICAkKFwiLnRhYnMtLW1lbnUtbW9iaWxlIC50YWItLWZpcnN0IGFcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoISQoXCIudGFiLS1maXJzdFwiKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSkge1xuICAgICAgICAgICQoXCIudGFiLS1zZWNvbmRcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgICAgJChcIi50YWItLWZpcnN0XCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG4gICAgICAgICAgJChcIi50YWItY29udGVudC0tZmlyc3RcIikucmVtb3ZlQ2xhc3MoXCJpcy1kZXNrdG9wXCIpO1xuICAgICAgICAgICQoXCIudGFiLWNvbnRlbnQtLXNlY29uZFwiKS5hZGRDbGFzcyhcImlzLWRlc2t0b3BcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLnRhYnMtLW1lbnUtbW9iaWxlIC50YWItLXNlY29uZCBhXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKCEkKFwiLnRhYi0tc2Vjb25kXCIpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgICAgJChcIi50YWItLWZpcnN0XCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICQoXCIudGFiLS1zZWNvbmRcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAkKFwiLnRhYi1jb250ZW50LS1zZWNvbmRcIikucmVtb3ZlQ2xhc3MoXCJpcy1kZXNrdG9wXCIpO1xuICAgICAgICAgICQoXCIudGFiLWNvbnRlbnQtLWZpcnN0XCIpLmFkZENsYXNzKFwiaXMtZGVza3RvcFwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIHRhYnMgbW9iaWxlIGZvcm1hcyBwYWdvXG4gICAgICAkKFwiLnRhYnMtLXBhZ29zLW9ubGluZSAuY29tcG9uZW50X19jYXJkXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChcIi50YWJzLS1wYWdvcy1vbmxpbmUgLmNvbXBvbmVudF9fY2FyZFwiKS5yZW1vdmVDbGFzcyhcIml0ZW0tYWN0aXZlXCIpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiaXRlbS1hY3RpdmVcIik7XG5cbiAgICAgICAgJChcIi50YWJzX19mb3JtYXMtZGUtcGFnbyAjdGFiLTAgLmNvbXBvbmVudFwiKS5yZW1vdmVDbGFzcyhcImlzLWhpZGUtbWJcIik7XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiaXRlbS1maXJzdFwiKSkge1xuICAgICAgICAgICQoXG4gICAgICAgICAgICBcIi50YWJzX19mb3JtYXMtZGUtcGFnbyAjdGFiLTAgLmpzLWl0ZW0tc2Vjb25kLCAudGFic19fZm9ybWFzLWRlLXBhZ28gI3RhYi0wIC5qcy1pdGVtLXRoaXJkXCJcbiAgICAgICAgICApLmFkZENsYXNzKFwiaXMtaGlkZS1tYlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcIml0ZW0tc2Vjb25kXCIpKSB7XG4gICAgICAgICAgJChcbiAgICAgICAgICAgIFwiLnRhYnNfX2Zvcm1hcy1kZS1wYWdvICN0YWItMCAuanMtaXRlbS1maXJzdCwgLnRhYnNfX2Zvcm1hcy1kZS1wYWdvICN0YWItMCAuanMtaXRlbS10aGlyZFwiXG4gICAgICAgICAgKS5hZGRDbGFzcyhcImlzLWhpZGUtbWJcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJpdGVtLXRoaXJkXCIpKSB7XG4gICAgICAgICAgJChcbiAgICAgICAgICAgIFwiLnRhYnNfX2Zvcm1hcy1kZS1wYWdvICN0YWItMCAuanMtaXRlbS1maXJzdCwgLnRhYnNfX2Zvcm1hcy1kZS1wYWdvICN0YWItMCAuanMtaXRlbS1zZWNvbmRcIlxuICAgICAgICAgICkuYWRkQ2xhc3MoXCJpcy1oaWRlLW1iXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJChcIi50YWJzLS1maW5hbmNpYSAuY29tcG9uZW50X19jYXJkXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJChcIi50YWJzLS1maW5hbmNpYSAuY29tcG9uZW50X19jYXJkXCIpLnJlbW92ZUNsYXNzKFwiaXRlbS1hY3RpdmVcIik7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJpdGVtLWFjdGl2ZVwiKTtcblxuICAgICAgICAkKFwiLnRhYnNfX2Zvcm1hcy1kZS1wYWdvICN0YWItMSAuY29tcG9uZW50XCIpLnJlbW92ZUNsYXNzKFwiaXMtaGlkZS1tYlwiKTtcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJpdGVtLWZpcnN0XCIpKSB7XG4gICAgICAgICAgJChcbiAgICAgICAgICAgIFwiLnRhYnNfX2Zvcm1hcy1kZS1wYWdvICN0YWItMSAuanMtaXRlbS1zZWNvbmQsIC50YWJzX19mb3JtYXMtZGUtcGFnbyAjdGFiLTEgLmpzLWl0ZW0tdGhpcmRcIlxuICAgICAgICAgICkuYWRkQ2xhc3MoXCJpcy1oaWRlLW1iXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiaXRlbS1zZWNvbmRcIikpIHtcbiAgICAgICAgICAkKFxuICAgICAgICAgICAgXCIudGFic19fZm9ybWFzLWRlLXBhZ28gI3RhYi0xIC5qcy1pdGVtLWZpcnN0LCAudGFic19fZm9ybWFzLWRlLXBhZ28gI3RhYi0xIC5qcy1pdGVtLXRoaXJkXCJcbiAgICAgICAgICApLmFkZENsYXNzKFwiaXMtaGlkZS1tYlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcyhcIml0ZW0tdGhpcmRcIikpIHtcbiAgICAgICAgICAkKFxuICAgICAgICAgICAgXCIudGFic19fZm9ybWFzLWRlLXBhZ28gI3RhYi0xIC5qcy1pdGVtLWZpcnN0LCAudGFic19fZm9ybWFzLWRlLXBhZ28gI3RhYi0xIC5qcy1pdGVtLXNlY29uZFwiXG4gICAgICAgICAgKS5hZGRDbGFzcyhcImlzLWhpZGUtbWJcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAkKFwiLnRhYnMtLW90cmFzLWZvcm1hcy1wYWdvIC5jb21wb25lbnRfX2NhcmRcIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkKFwiLnRhYnMtLW90cmFzLWZvcm1hcy1wYWdvIC5jb21wb25lbnRfX2NhcmRcIikucmVtb3ZlQ2xhc3MoXG4gICAgICAgICAgXCJpdGVtLWFjdGl2ZVwiXG4gICAgICAgICk7XG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJpdGVtLWFjdGl2ZVwiKTtcblxuICAgICAgICAkKFxuICAgICAgICAgIFwiLmNhbmFsZXMtcGFnbyAucGF5bWVudC1yb3c6bnRoLWNoaWxkKDIpLCAuY2FuYWxlcy1wYWdvIC5wYXltZW50LXJvdzpudGgtY2hpbGQoMylcIlxuICAgICAgICApLmhpZGUoKTtcbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJpdGVtLWZpcnN0XCIpKSB7XG4gICAgICAgICAgJChcbiAgICAgICAgICAgIFwiLmNhbmFsZXMtcGFnbyAucGF5bWVudC1yb3c6bnRoLWNoaWxkKDIpLCAuY2FuYWxlcy1wYWdvIC5wYXltZW50LXJvdzpudGgtY2hpbGQoMylcIlxuICAgICAgICAgICkuaGlkZSgpO1xuICAgICAgICAgICQoXCIuY2FuYWxlcy1wYWdvIC5wYXltZW50LXJvdzpudGgtY2hpbGQoMSlcIikuc2hvdygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKFwiaXRlbS1zZWNvbmRcIikpIHtcbiAgICAgICAgICAkKFxuICAgICAgICAgICAgXCIuY2FuYWxlcy1wYWdvIC5wYXltZW50LXJvdzpudGgtY2hpbGQoMSksIC5jYW5hbGVzLXBhZ28gLnBheW1lbnQtcm93Om50aC1jaGlsZCgzKVwiXG4gICAgICAgICAgKS5oaWRlKCk7XG4gICAgICAgICAgJChcIi5jYW5hbGVzLXBhZ28gLnBheW1lbnQtcm93Om50aC1jaGlsZCgyKVwiKS5zaG93KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoXCJpdGVtLXRoaXJkXCIpKSB7XG4gICAgICAgICAgJChcbiAgICAgICAgICAgIFwiLmNhbmFsZXMtcGFnbyAucGF5bWVudC1yb3c6bnRoLWNoaWxkKDEpLCAuY2FuYWxlcy1wYWdvIC5wYXltZW50LXJvdzpudGgtY2hpbGQoMilcIlxuICAgICAgICAgICkuaGlkZSgpO1xuICAgICAgICAgICQoXCIuY2FuYWxlcy1wYWdvIC5wYXltZW50LXJvdzpudGgtY2hpbGQoMylcIikuc2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICB9O1xufSkoalF1ZXJ5LCBEcnVwYWwsIHRoaXMsIHRoaXMuZG9jdW1lbnQpO1xuIl19
